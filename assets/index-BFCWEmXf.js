import{r as c,a as on,R as Vs}from"./vendor-nf7bT_Uh.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))N(j);new MutationObserver(j=>{for(const y of j)if(y.type==="childList")for(const f of y.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&N(f)}).observe(document,{childList:!0,subtree:!0});function C(j){const y={};return j.integrity&&(y.integrity=j.integrity),j.referrerPolicy&&(y.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?y.credentials="include":j.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function N(j){if(j.ep)return;j.ep=!0;const y=C(j);fetch(j.href,y)}})();var Xs={exports:{}},kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ln=c,cn=Symbol.for("react.element"),dn=Symbol.for("react.fragment"),mn=Object.prototype.hasOwnProperty,un=ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hn={key:!0,ref:!0,__self:!0,__source:!0};function Ys(l,m,C){var N,j={},y=null,f=null;C!==void 0&&(y=""+C),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(f=m.ref);for(N in m)mn.call(m,N)&&!hn.hasOwnProperty(N)&&(j[N]=m[N]);if(l&&l.defaultProps)for(N in m=l.defaultProps,m)j[N]===void 0&&(j[N]=m[N]);return{$$typeof:cn,type:l,key:y,ref:f,props:j,_owner:un.current}}kt.Fragment=dn;kt.jsx=Ys;kt.jsxs=Ys;Xs.exports=kt;var e=Xs.exports,es={},Ws=on;es.createRoot=Ws.createRoot,es.hydrateRoot=Ws.hydrateRoot;const a={cloudBackupUrl:null,gameVersion:"1.3.0",ownerHandle:"alexafoot911-web",autosaveInterval:10,api:{submitRunUrl:null,leaderboardUrl:null,requestHandleUrl:null,timeout:1e4,retryDelay:2e3},healthCheck:{interval:7,simulationDays:7,minLeadsPerDay:1,softClamps:{maxSalary:1e4,maxPayout:5e4,maxCash:1e6,maxReputation:1e3,maxEditors:200,maxPCs:100}},dev:{commandPaletteHotkey:"`",simulationDays:30,maxCashFill:1e6,maxLeadsSpawn:50,changelogMaxEntries:100,performance:{targetFPS:60,maxRenderTime:16,maxTickTime:8,batchUpdates:!0,memoizeExpensive:!0,virtualizeLists:!0,maxVisibleJobs:20,maxVisibleEditors:30,maxVisiblePCs:20}},featureFlags:{blackMarket:!0,prestige:!0,saveSystem:!0,teamEfficiency:!0,managers:!0,onboarding:!0,costScaling:!0,dailyOverhead:!0,marketCycles:!0,jobTiers:!0,graceWindow:!0,pcCrash:!0,burnout:!0,memeEvents:!0,research:!0,achievements:!0,marketing:!0,reputationTiers:!0,leaderboard:!0},balance:{efficiencyDecayStart:10,efficiencyDecayRate:.05,efficiencyMin:.35,managerUnlockThresholds:[10,25,50],managerEfficiencyBonus:.15,managerSalary:300,maxManagers:3,onboardingBaseHours:8,onboardingScalingFactor:.5,hireEditor:{baseCost:650,scalingFactor:1.15},buyPC:{baseCost:900,scalingFactor:1.12},trainEditor:{baseCost:220,scalingFactor:1.08},upgradePC:{baseCost:350,scalingFactor:1.1},upgradeEffectiveness:{skillGain:{base:4.5,variance:1.5,diminishingFactor:.95},pcPowerGain:{base:9,variance:3,diminishingFactor:.92},pcStabilityGain:{base:1,variance:2,diminishingFactor:.98},overhead:{softwareLicense:{perEditor:25,perPC:15},facility:{baseCost:200,logarithmicFactor:50}},marketCycle:{cycleLength:7,boostMultiplier:1.5,nerfMultiplier:.7},jobMechanics:{graceWindow:{threshold:.95,extraHours:6,payoutMultiplier:.8,reputationLoss:2},pcCrash:{baseChance:.05,stabilityFactor:.8},burnout:{threshold:12,energyDrainMultiplier:2}},memeEvents:{dailyChance:.0075,maxPerDay:1,events:[{id:"adobe_charge",title:"Adobe Subscription Renewal",description:"Your Adobe Creative Cloud subscription just auto-renewed... again.",cashDelta:-200,color:"text-red-400",icon:"üí∏"},{id:"topaz_renewal",title:"Topaz Labs Renewal",description:"Topaz Labs plugins need renewal. Time to pay the piper.",cashDelta:-200,color:"text-red-400",icon:"üîå"},{id:"hard_drive_recovery",title:"Hard Drive Recovery",description:"Critical project files corrupted. Emergency data recovery needed.",cashDelta:-1e3,color:"text-red-500",icon:"üíæ"},{id:"rare_tip",title:"Rare Client Tip",description:"A grateful client left an unexpected tip for your amazing work!",cashDelta:500,color:"text-green-400",icon:"üí∞"},{id:"coffee_spill",title:"Coffee Spill Incident",description:"Someone spilled coffee on the new equipment. Again.",cashDelta:-150,color:"text-red-400",icon:"‚òï"},{id:"viral_moment",title:"Viral Social Media Moment",description:"Your work went viral! Unexpected exposure bonus.",cashDelta:300,color:"text-green-400",icon:"üì±"}]},blackMarket:{crackedPlugins:{cost:150,skillBoost:15,speedBoost:.3,duration:24,virusRisk:.05,description:"Cracked plugins from the dark web. Massive performance boost but high risk of system corruption."}},research:{baseCost:500,costMultiplier:1.5,maxLevel:10,upgrades:[{id:"progress_boost",name:"Workflow Optimization",description:"Increase job progress by 5%",icon:"‚ö°",effect:"progress",value:.05,tooltip:"+5% job progress speed"},{id:"payout_boost",name:"Client Relations",description:"Increase job payouts by 3%",icon:"üí∞",effect:"payout",value:.03,tooltip:"+3% job payouts"},{id:"fail_penalty_reduction",name:"Quality Assurance",description:"Reduce failed job penalty by 10%",icon:"üõ°Ô∏è",effect:"failPenalty",value:.1,tooltip:"-10% failed job penalty"},{id:"energy_efficiency",name:"Energy Management",description:"Reduce energy drain by 5%",icon:"üîã",effect:"energyDrain",value:.05,tooltip:"-5% editor energy drain"},{id:"reputation_gain",name:"Reputation Management",description:"Increase reputation gain by 8%",icon:"‚≠ê",effect:"reputation",value:.08,tooltip:"+8% reputation gain from jobs"}]},prestige:{requirements:{reputation:100,cash:1e4},perks:[{id:"spawn_rate",name:"Marketing Mastery",description:"Increase job spawn rate by 2%",icon:"üìà",effect:"spawnRate",value:.02,tooltip:"+2% job spawn rate"},{id:"salary_reduction",name:"Negotiation Skills",description:"Reduce editor salaries by 3%",icon:"üíº",effect:"salaryReduction",value:.03,tooltip:"-3% editor salary costs"},{id:"training_efficiency",name:"Learning Optimization",description:"Increase training effectiveness by 5%",icon:"üéì",effect:"trainingEfficiency",value:.05,tooltip:"+5% training skill gain"},{id:"pc_efficiency",name:"Hardware Mastery",description:"Increase PC upgrade effectiveness by 4%",icon:"üñ•Ô∏è",effect:"pcEfficiency",value:.04,tooltip:"+4% PC upgrade gains"},{id:"energy_efficiency",name:"Work-Life Balance",description:"Reduce energy drain by 2%",icon:"‚ö°",effect:"energyEfficiency",value:.02,tooltip:"-2% editor energy drain"}]}}},marketing:{baseCost:180,costMultiplier:1.5,maxUsesPerDay:5,leadCount:{min:2,max:3}},reputationTiers:[{name:"Rookie",min:0,max:9,color:"text-green-400"},{name:"Pro",min:10,max:24,color:"text-blue-400"},{name:"Legend",min:25,max:49,color:"text-purple-400"},{name:"Master",min:50,max:89,color:"text-orange-400"},{name:"Icon",min:90,max:999,color:"text-red-400"}],reputationUnlocks:[{reputation:10,description:"Tier 2 Jobs unlocked"},{reputation:25,description:"Brand Contracts unlocked"},{reputation:50,description:"Tier 4 Jobs unlocked"},{reputation:90,description:"Tier 5 Jobs unlocked"}],achievements:{flawlessDeliveries:{id:"flawless_deliveries",name:"Perfect Editor",description:"Complete 10 jobs with flawless quality",icon:"‚ú®",requirement:10,color:"text-yellow-400"},largeTeam:{id:"large_team",name:"Studio Boss",description:"Have 50 staff members (editors + managers)",icon:"üë•",requirement:50,color:"text-blue-400"},overnightJobs:{id:"overnight_jobs",name:"Night Owl",description:"Complete 5 jobs that took over 24 hours",icon:"üåô",requirement:5,color:"text-purple-400"},highReputation:{id:"high_reputation",name:"Legendary Studio",description:"Reach 200 reputation",icon:"üèÜ",requirement:200,color:"text-orange-400"},richStudio:{id:"rich_studio",name:"Millionaire",description:"Accumulate $50,000 cash",icon:"üí∞",requirement:5e4,color:"text-green-400"},speedDemon:{id:"speed_demon",name:"Speed Demon",description:"Complete 20 jobs in under 8 hours each",icon:"‚ö°",requirement:20,color:"text-red-400"},qualityMaster:{id:"quality_master",name:"Quality Master",description:"Complete 30 jobs with quality above 90",icon:"üéØ",requirement:30,color:"text-indigo-400"},workaholic:{id:"workaholic",name:"Workaholic",description:"Have editors work for 48 consecutive hours",icon:"üí™",requirement:48,color:"text-pink-400"},marketCycler:{id:"market_cycler",name:"Market Master",description:"Experience 10 market cycles",icon:"üìä",requirement:10,color:"text-cyan-400"},researchMaster:{id:"research_master",name:"Research Master",description:"Max out 3 research categories",icon:"üî¨",requirement:3,color:"text-emerald-400"}}},Gs=["Porsche 911 GT3 RS","Lamborghini Aventador","Ferrari 488 Pista","McLaren 765LT","Aston Martin Valhalla","Nissan GT‚ÄëR R35","Toyota Supra","BMW M3 (G80)","Audi RS6","Ford Mustang GT","Chevrolet Corvette C8","Mazda RX‚Äë7","Subaru WRX STI","Honda NSX","Koenigsegg Jesko","Czinger 21C"],bt=[{name:"Tier 1",reputationRequired:0,multiplier:1,color:"text-green-400"},{name:"Tier 2",reputationRequired:10,multiplier:1.2,color:"text-blue-400"},{name:"Tier 3",reputationRequired:25,multiplier:1.4,color:"text-purple-400"},{name:"Tier 4",reputationRequired:50,multiplier:1.6,color:"text-orange-400"},{name:"Tier 5",reputationRequired:90,multiplier:2,color:"text-red-400"}],Kt=[{name:"Reel (30s)",baseHours:8,basePay:350,diff:35,tier:1},{name:"Montage (60s)",baseHours:16,basePay:800,diff:55,tier:2},{name:"Ad (15s)",baseHours:10,basePay:650,diff:60,tier:2},{name:"Event Recap (90s)",baseHours:24,basePay:1600,diff:70,tier:3},{name:"Cinematic (2m)",baseHours:30,basePay:2200,diff:80,tier:4}],Qt=["06._media","trusionmedia","pfreecreative","mxhmedia","rjxspeed","wokeroto","_valfilms_","_gabrielhausen_","vive.dts","stephan.edits","heronalexandru","greg.marshall5.0","dmooremedia","fastlanegfx","gtr._.auto","shotxninja","alx.edits","_nightoff_","jerz_pics","_cfilms_","sxorps","fd.revv","wheelersmedia","exquisitemedia_","danishedits","unrxndered","maty.media_","djordanmedia","kaizenvisualz_","mediabytom","r6wyatt","crownwasfound","feltsfilms","kalebbrokaw","instaflickz","pasalu.jpg","gtsknoow","jasevisions","fivo.mp4","360.mediaedits","jry.media","xpseqo","hellrotgarage","mconcow","flipvisuals","fizzfpv","district.jp","ouamlil","rohhse.tm","alex.efex","mastro.media","dragonchill.vfx","j.r._.media","xe6at","ascn.co","oliver.br_","pascalsteinhaus","willberg.works","jayp.cars","bs.visualss","farzinnoorani","redman_productions","editbyrzaw","timk7.5","rift.clb","js.swed","lo2.film","hawaiian.media","nolanchannon","jsc.media_","jerzmedia","bakhorr","noah_woodrow","_havisuals","_hunter_clarke_","josh.mda","keanu.visuals","danny_aep","openiris","leemelon.jr","krome.media","sammy_mediaa","danielpetermedia","favgraphs","romavag_fx","d2_shots","sutra.edits","zodashotz","n.k_media","reese_productions","gabut.fx","gelographics","paulxhowie","tijs_media","knoxy_media","nickjonasmedia","m6a.edits","swiz.prod","tsmalls.co","hardest.fx","ezra.media","chancetheshooter","sxt.media","iceymedia","motionvid","youre.icon","rs3btw","bylance","mxvframes","speedramps","ken_miso","mediabyjuan"],Zt={skill:60,speed:1,salary:120},vt=[{id:"jerryflow",name:"JerryFlow V2",desc:"Workflow accelerator ‚Äî +0.10 editor speed.",cost:240,speedBonus:.1},{id:"essentialfx",name:"ESSENTIALFX",desc:"Preset & FX pack ‚Äî +0.05 editor speed.",cost:250,speedBonus:.05},{id:"jerrysfx",name:"JerrySFX",desc:"Sound pack ‚Äî +0.05 editor speed.",cost:90,speedBonus:.05},{id:"essentialsfx",name:"ESSENTIALSFX",desc:"Core whooshes & hits ‚Äî +0.05 editor speed.",cost:80,speedBonus:.05},{id:"ghflow",name:"GH Glow (v1)",desc:"After Effects extension ‚Äî +0.10 editor speed.",cost:50,speedBonus:.1},{id:"districtjp",name:"district.jp membership",desc:"More inbound work ‚Äî +0.05 spawn rate & +2 lead cap.",cost:900,spawnBonus:.05,leadCapBonus:2}],W=(l,m)=>Math.floor(Math.random()*(m-l+1))+l,H=(l,m,C)=>Math.max(m,Math.min(C,l)),jt=()=>Math.random().toString(36).slice(2,9);function qs(){return[]}function zs(){return[{id:jt(),name:"PC‚Äë01",tier:1,power:55,stability:92,assignedJobId:null}]}function Ve(l,m,C){const N=m[W(0,m.length-1)],j=H(N.diff+W(-10,15),20,95),y=H(Math.round(N.baseHours*(.75+Math.random()*.8)),4,48),f=Math.round((N.basePay+W(-120,250))*(.9+j/200)),T=C(N,f),k=l+Math.round(y*(1.15+Math.random()*.9));return{id:jt(),clientName:xn(),brand:Gs[W(0,Gs.length-1)],type:N.name,difficulty:j,timeRequired:y,payout:T,deadline:k,progress:0,status:"available",accepted:!1,assignedEditorId:null,assignedPCId:null}}function xn(){const l=["Tom","Ava","Blake","Mia","Ezra","Leo","Noah","Isla","Zara","Luca","Aria","Mason","Kai","Nate","Sophie"],m=["Francis","Evans","Ngata","Singh","Cohen","Kaur","Patel","Martin","Brown","Lee","Silva","Wright","King","Green"],C=["Motors","Supercars","Detailing","Media","Club","Racing","Collective","Auto","Films","Garage"];return`${l[W(0,l.length-1)]} ${m[W(0,m.length-1)]} ${C[W(0,C.length-1)]}`}function gn(){var Hs;const[l,m]=c.useState(0),[C,N]=c.useState(!1),[j,y]=c.useState(1),[f,T]=c.useState(1e3),[k,oe]=c.useState(0),[Re,ue]=c.useState(!0),[g,G]=c.useState(()=>F("editors",qs())),[b,I]=c.useState(()=>F("pcs",zs())),[B,J]=c.useState(()=>F("jobs",[])),[De,Le]=c.useState(()=>F("log",["Welcome to Car Editor Tycoon! Accept jobs, assign your team, and build a legendary studio."])),[ss,Nt]=c.useState(0),[Ks]=c.useState(.22),[Z,Ct]=c.useState(()=>new Set(F("upgrades",[]))),[wt,St]=c.useState(()=>F("revhist",[])),[Mt,as]=c.useState(0),[Nn,Cn]=c.useState(null),[R,Xe]=c.useState(()=>F("managers",0)),[ns,Qs]=c.useState(!1),[le,Ye]=c.useState(()=>F("editorTrainingCount",{})),[ee,Et]=c.useState(()=>F("pcUpgradeCount",{})),[_,Ke]=c.useState(()=>F("marketCycle",{boostedType:null,nerfedType:null,cycleStartDay:1,currentCycle:1})),[ce,Fe]=c.useState(()=>F("editorWorkHours",{})),[he,Ae]=c.useState(()=>F("graceWindowJobs",new Set)),[te,Be]=c.useState(()=>F("memeEventState",{lastEventDay:0,eventsToday:0,lastEventId:null})),[rs,_e]=c.useState(null),[K,Qe]=c.useState(()=>F("blackMarketEffects",{active:!1,expiresAt:0,skillBoost:0,speedBoost:0})),[Zs,Ze]=c.useState(!1),[is,et]=c.useState(3),[xe,tt]=c.useState(()=>F("researchLevels",{})),[os,st]=c.useState(!1),[q,at]=c.useState(()=>F("prestigePoints",0)),[se,nt]=c.useState(()=>F("seasonHighRep",0)),[ls,ve]=c.useState(!1),[z,Pt]=c.useState(()=>F("achievements",new Set)),[P,ye]=c.useState(()=>F("achievementStats",{flawlessDeliveries:0,overnightJobs:0,speedDemonJobs:0,qualityMasterJobs:0,maxWorkHours:0,marketCycles:0,maxResearchCategories:0})),[cs,rt]=c.useState(!1),[ea,wn]=c.useState([]),[ta,Sn]=c.useState(!1),[sa,Mn]=c.useState(null),[je,ds]=c.useState(null),[aa,En]=c.useState(null),[na,ms]=c.useState("game"),[ra,ia]=c.useState({email:"",preferredHandle:""}),[Je,it]=c.useState(0),[X,ge]=c.useState(null),[ke,ot]=c.useState(null),[lt,ct]=c.useState([]),us=new URLSearchParams(window.location.search),oa=us.get("dev")==="1",la=(us.get("handle")||null)===a.ownerHandle,Ne=oa||la,[ca,Ue]=c.useState(!1),[$t,Ce]=c.useState(""),[Ie,Tt]=c.useState([]),[Oe,He]=c.useState(-1),[we,Rt]=c.useState(()=>F("changelog",[])),[da,hs]=c.useState(!1),[pe,Dt]=c.useState({fps:0,renderTime:0,tickTime:0,memoryUsage:0,renderCount:0,lastFrameTime:0}),[Lt,dt]=c.useState([]),ma=()=>{const t=document.createElement("canvas"),s=t.getContext("2d");t.width=800,t.height=600;const n=s.createLinearGradient(0,0,0,600);n.addColorStop(0,"#1a1a1a"),n.addColorStop(1,"#0a0a0a"),s.fillStyle=n,s.fillRect(0,0,800,600),s.fillStyle="#ffffff",s.font="bold 48px Arial",s.textAlign="center",s.fillText("Car Editor Tycoon",400,80),s.fillText("Run Summary",400,130);const o=[{label:"Team Size",value:`${g.length} editors`,icon:"üë•"},{label:"Equipment",value:`${b.length} PCs`,icon:"üñ•Ô∏è"},{label:"Reputation",value:`${k}`,icon:"‚≠ê"},{label:"Cash",value:`$${f.toLocaleString()}`,icon:"üí∞"},{label:"Season",value:`Day ${Math.floor(l/24)}`,icon:"üìÖ"},{label:"Prestige",value:`${q} points`,icon:"üåü"}];s.font="bold 24px Arial",s.textAlign="left",o.forEach((r,i)=>{const x=Math.floor(i/2),d=100+i%2*300,S=200+x*80;s.font="32px Arial",s.fillText(r.icon,d,S),s.font="bold 20px Arial",s.fillStyle="#888888",s.fillText(r.label,d+50,S-10),s.font="bold 28px Arial",s.fillStyle="#ffffff",s.fillText(r.value,d+50,S+15)}),z.size>0&&(s.font="bold 24px Arial",s.fillStyle="#ffffff",s.textAlign="center",s.fillText("üèÜ Achievements",400,420),s.font="16px Arial",s.fillStyle="#cccccc",Array.from(z).slice(0,3).forEach((i,x)=>{const u=a.achievements[i];u&&s.fillText(`${u.icon} ${u.name}`,400,450+x*25)})),s.font="14px Arial",s.fillStyle="#666666",s.textAlign="center",s.fillText(`Generated on ${new Date().toLocaleDateString()}`,400,580),t.toBlob(r=>{const i=URL.createObjectURL(r),x=document.createElement("a");x.href=i,x.download=`car-editor-tycoon-run-${Date.now()}.png`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(i),h("üì∏ Run summary image generated and downloaded!")})},[Y,Se]=c.useState(()=>F("marketingUsage",{lastUseDay:0,usesToday:0}));c.useEffect(()=>{A("editors",g)},[g]),c.useEffect(()=>{A("pcs",b)},[b]),c.useEffect(()=>{A("jobs",B)},[B]),c.useEffect(()=>{A("log",De)},[De]),c.useEffect(()=>{A("revhist",wt)},[wt]),c.useEffect(()=>{A("upgrades",Array.from(Z))},[Z]),c.useEffect(()=>{A("managers",R)},[R]),c.useEffect(()=>{A("editorTrainingCount",le)},[le]),c.useEffect(()=>{A("pcUpgradeCount",ee)},[ee]),c.useEffect(()=>{A("marketCycle",_)},[_]),c.useEffect(()=>{A("editorWorkHours",ce)},[ce]),c.useEffect(()=>{A("graceWindowJobs",Array.from(he))},[he]),c.useEffect(()=>{A("memeEventState",te)},[te]),c.useEffect(()=>{A("blackMarketEffects",K)},[K]),c.useEffect(()=>{A("researchLevels",xe)},[xe]),c.useEffect(()=>{A("prestigePoints",q)},[q]),c.useEffect(()=>{A("seasonHighRep",se)},[se]),c.useEffect(()=>{A("achievements",Array.from(z))},[z]),c.useEffect(()=>{A("achievementStats",P)},[P]),c.useEffect(()=>{A("marketingUsage",Y)},[Y]),c.useEffect(()=>{const t={msg:"Unicode test Œ≤ ‚Äî ‚Ä¢ üöó",path:"C:\\Users\\Alex\\Videos\\auto_reel\\clip.mp4"};A("__test__",t);const s=F("__test__",null),n=s&&s.msg===t.msg&&s.path===t.path;Le(o=>[Xt(),n?"‚úÖ Storage test passed":"‚ùå Storage test failed",...o]);try{localStorage.removeItem(ts+"__test__")}catch{}},[]),c.useEffect(()=>{const t=new Set(g.map(i=>i.name)),s=Qt.filter(i=>!t.has(i)),n=t.size===g.length,o=g.every(i=>Qt.includes(i.name)),r=n&&o&&s.every(i=>!t.has(i));Le(i=>[Xt(),r?"‚úÖ Hire-pool tests passed":`‚ùå Hire-pool tests failed: ${JSON.stringify({unique:n,inPool:o,remainingCount:s.length})}`,...i])},[]),c.useEffect(()=>{l>0&&l%a.autosaveInterval===0&&l!==Mt&&(as(l),h("üíæ Autosaved game progress."))},[l,Mt]),c.useEffect(()=>{const t=()=>{l>0&&h("üíæ Autosaved on app blur.")};return window.addEventListener("blur",t),()=>window.removeEventListener("blur",t)},[l]),c.useEffect(()=>{const t=s=>{s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA"||s.key===a.dev.commandPaletteHotkey&&Ne&&(s.preventDefault(),Ue(!0),Ce(""),He(-1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[Ne]);const We=c.useMemo(()=>{let t=0,s=0,n=0;return Z.forEach(o=>{const r=vt.find(i=>i.id===o);r&&(r.speedBonus&&(t+=r.speedBonus),r.spawnBonus&&(s+=r.spawnBonus),r.leadCapBonus&&(n+=r.leadCapBonus))}),{speedBonus:t,spawnBonus:s,leadCapBonus:n}},[Z]),mt=H(Ks+We.spawnBonus+Ds(),0,.95),ut=6+We.leadCapBonus,ht=c.useMemo(()=>me(()=>({teamEfficiency:Math.max(.35,1-(g.length-10)*.02),dailySalaries:Me(),dailyOverhead:fe(),availableJobTypes:Ee(),currentReputationTier:Vt(),nextReputationUnlock:be()}),"memoized calculations").result,[g.length,B.length,R,xe,k,a.dev.performance.memoizeExpensive]),xt=c.useMemo(()=>B.slice(0,a.dev.performance.maxVisibleJobs),[B,a.dev.performance.virtualizeLists]),ua=c.useMemo(()=>g.slice(0,a.dev.performance.maxVisibleEditors),[g,a.dev.performance.virtualizeLists]),ha=c.useMemo(()=>b.slice(0,a.dev.performance.maxVisiblePCs),[b,a.dev.performance.virtualizeLists]),gt=c.useRef(null);c.useEffect(()=>{if(!C){gt.current&&clearInterval(gt.current);return}return gt.current=setInterval(()=>{xs()},1e3/j),()=>clearInterval(gt.current)},[C,j,l,B,g,b,mt,ut,We.speedBonus]);function xs(){const t=performance.now(),s=[];s.push(()=>m(u=>u+1)),l%(a.healthCheck.interval*24)===0&&me(()=>qa(),"health check"),me(()=>$a(),"market cycle"),Da()&&me(()=>La(),"meme event");const n=me(()=>{let u=[...B];if(Math.random()<mt&&ss<=0&&u.filter(d=>d.status==="available").length<ut){const d=ht.availableJobTypes;d.length>0&&(u.unshift(Ve(l,d,qe)),s.push(()=>h("üìû New client inquiry - time to hustle!")),s.push(()=>Nt(W(2,6))))}return u.map(d=>({...d}))},"job spawning");s.push(()=>J(n.result)),s.push(()=>Nt(u=>Math.max(0,u-1)));const o=me(()=>{const u=B.map(p=>{if(p.status!=="active")return p;const E=g.find(Yt=>Yt.id===p.assignedEditorId),v=b.find(Yt=>Yt.id===p.assignedPCId);if(!E||!v||E.resting)return p;const L=E.onboardingComplete&&l<E.onboardingComplete?.3:1,D=Ns(v),$=Math.random()<D?W(1,2):0,U=1+(E.speed-1)+(v.power-50)/100+We.speedBonus+qt(),re=H(1*U-$,0,4),O=1+Es(),nn=re*ht.teamEfficiency*L*O,rn=p.progress+nn;return{...p,progress:rn}}),d=[],S=[],M=[];return u.forEach(p=>{if(p.status==="active"&&p.progress>=p.timeRequired&&d.push(p.id),(p.status==="active"||p.status==="available")&&l>=p.deadline)if(Ra(p))M.push(p.id),s.push(()=>h(`‚è∞ ${p.type} gets a grace window! +${a.balance.jobMechanics.graceWindow.extraHours}h extension granted.`));else if(l>=ws(p))S.push({id:p.id,reason:"Grace window expired"});else{if(l>p.deadline)return;S.push({id:p.id,reason:"Missed deadline"})}}),d.length>0&&s.push(()=>d.forEach(p=>pa(p))),S.length>0&&s.push(()=>S.forEach(({id:p,reason:E})=>ps(p,E))),M.length>0&&s.push(()=>Ae(p=>new Set([...p,...M]))),u},"job progress");s.push(()=>J(o.result));const r=me(()=>g.map(d=>{const S=d.resting??!1;if(!d.assignedJobId)return d.energy<100?{...d,resting:!1,energy:H(d.energy+1,0,100)}:{...d,resting:!1};if(S){const M=H(d.energy+3,0,100),p=M>=100;return p&&(s.push(()=>h(`‚òï ${d.name} is back from coffee break - recharged and ready to edit!`)),s.push(()=>Fe(E=>({...E,[d.id]:0})))),{...d,energy:M,resting:!p}}else{const p=(ce[d.id]||0)+1;s.push(()=>Fe(U=>({...U,[d.id]:p}))),s.push(()=>ye(U=>({...U,maxWorkHours:Math.max(U.maxWorkHours,p)})));const E=Ta(d.id),v=1-Ts(),w=1-Bs(),L=Math.round(1*E*v*w),D=H(d.energy-L,0,100),$=D<=15;return $&&s.push(()=>h(`‚òï ${d.name} needs a coffee break - even editors need caffeine!`)),{...d,energy:D,resting:$}}}),"editor updates");s.push(()=>G(r.result)),(l+1)%24===0&&me(()=>{const u=ht.dailySalaries,d=ht.dailyOverhead,S=u+d;return S>0&&(s.push(()=>T(M=>M-S)),s.push(()=>h(`üí∏ Daily burn: -$${S.toLocaleString()} (salaries: $${u.toLocaleString()}, overhead: $${d.toLocaleString()})`))),{dailySalaries:u,dailyOverhead:d,totalDaily:S}},"daily expenses");const x=performance.now()-t;x>a.dev.performance.maxTickTime&&(console.warn(`Tick performance warning: ${x.toFixed(2)}ms`),dt(u=>[...u.slice(-4),{label:"tick processing",duration:x,timestamp:Date.now()}])),en(),Us(s)}function xa(t){J(s=>s.map(n=>n.id===t?{...n,accepted:!0,status:"active"}:n)),h("‚úÖ Job accepted - let's make some magic happen!"),Re&&gs(t)}function gs(t){J(s=>{if(!s.find(i=>i.id===t))return s;const o=g.find(i=>!i.assignedJobId&&i.energy>=30),r=b.find(i=>!i.assignedJobId);return o&&r&&ga(t,o.id,r.id),s})}function ga(t,s,n){G(o=>o.map(r=>r.id===s?{...r,assignedJobId:t}:r)),I(o=>o.map(r=>r.id===n?{...r,assignedJobId:t}:r)),J(o=>o.map(r=>r.id===t?{...r,assignedEditorId:s,assignedPCId:n}:r)),h(`üë• ${Is(s)} assigned to ${Os(n)} - dream team activated!`)}function Ft(t){B.find(n=>n.id===t)&&(G(n=>n.map(o=>o.assignedJobId===t?{...o,assignedJobId:null}:o)),I(n=>n.map(o=>o.assignedJobId===t?{...o,assignedJobId:null}:o)),J(n=>n.map(o=>o.id===t?{...o,assignedEditorId:null,assignedPCId:null}:o)),h("üîÑ Team unassigned - ready for the next challenge!"))}function pa(t){const s=B.find(v=>v.id===t);if(!s)return;const n=g.find(v=>v.id===s.assignedEditorId),o=b.find(v=>v.id===s.assignedPCId),r=Math.round(((n==null?void 0:n.skill)??40+Gt())*.6+((o==null?void 0:o.power)??50)*.4+W(-10,15)),i=r>=s.difficulty,x=he.has(t);let u=i?s.payout:Math.round(s.payout*.5);const d=1+Ps(),S=1-$s(),M=1+Rs();if(x)u=Math.round(u*a.balance.jobMechanics.graceWindow.payoutMultiplier*d),oe(v=>H(v-a.balance.jobMechanics.graceWindow.reputationLoss,-50,999)),h(`‚è∞ ${s.type} completed in grace window! Reduced payout but saved the day (-${a.balance.jobMechanics.graceWindow.reputationLoss} rep).`);else{u=Math.round(u*d);const v=i?3:Math.round(-4*S);oe(w=>H(w+Math.round(v*M),-50,999))}T(v=>v+u),St(v=>[...v.slice(-59),{t:l,v:u}]),Ft(t),J(v=>v.map(w=>w.id===t?{...w,status:"done"}:w)),x&&Ae(v=>{const w=new Set(v);return w.delete(t),w}),h(`üé¨ ${s.type} for ${s.brand} delivered! ${i?"üî• Amazing quality":"üòÖ Decent effort"} - +$${u.toLocaleString()}`);const p=l-(s.deadline-s.timeRequired),E=r;ye(v=>{const w={...v};return i&&(w.flawlessDeliveries+=1),p>24&&(w.overnightJobs+=1),p<8&&(w.speedDemonJobs+=1),E>90&&(w.qualityMasterJobs+=1),w}),setTimeout(an,100)}function ps(t,s=""){B.find(o=>o.id===t)&&(Ft(t),J(o=>o.map(r=>r.id===t?{...r,status:"failed"}:r)),oe(o=>H(o-6,-50,999)),h(`üí• Job failed${s?` - ${s}`:""}! Reputation takes a hit (-6).`))}function fs(){const t=new Set(g.map(s=>s.name));return Qt.filter(s=>!t.has(s))}function fa(){const t=It();if(f<t)return V("Not enough cash to hire.");const s=fs();if(s.length===0)return V("All friends already hired.");const n=s[Math.floor(Math.random()*s.length)],o=a.balance.onboardingBaseHours+g.length*a.balance.onboardingScalingFactor,r=l+o,i={id:jt(),name:n,skill:Zt.skill,speed:Zt.speed,energy:100,salary:Zt.salary,assignedJobId:null,resting:!1,onboardingComplete:r};G(x=>[...x,i]),T(x=>x-t),h(`üéâ Welcome ${i.name} to the team! Onboarding complete in ${o}h.`)}function ba(){const t=2e3+R*500;if(f<t)return V("Not enough cash to hire manager.");const s=a.balance.managerUnlockThresholds.filter(n=>g.length>=n).length;if(R>=s)return V("No manager slots available.");if(R>=a.balance.maxManagers)return V("Maximum managers reached.");Xe(n=>n+1),T(n=>n-t),h(`üëî Manager #${R+1} hired! Team efficiency boosted - time to level up!`)}function va(){const t=Ot();if(f<t)return V("Not enough cash for a new PC.");const s={id:jt(),name:`PC‚Äë${String(b.length+1).padStart(2,"0")}`,tier:1,power:W(52,70),stability:W(88,96),assignedJobId:null};I(n=>[...n,s]),T(n=>n-t),h(`üñ•Ô∏è ${s.name} purchased! Power level: ${s.power} - let's crush some pixels!`)}function ya(t){const s=Ht(t);if(f<s)return V("Not enough cash to train.");const n=Sa(t),o=1+Fs(),r=Math.round(n*o);G(i=>i.map(x=>x.id===t?{...x,skill:H(x.skill+r,20,99)}:x)),Ye(i=>({...i,[t]:(i[t]||0)+1})),T(i=>i-s),h(`üéì Training complete! +${r} skill points earned - knowledge is power!`)}function ja(t){const s=Wt(t);if(f<s)return V("Not enough cash to upgrade.");const n=Ma(t),o=Ea(t),r=1+As(),i=Math.round(n*r),x=Math.round(o*r);I(u=>u.map(d=>d.id===t?{...d,tier:d.tier+1,power:H(d.power+i,45,120),stability:H(d.stability+x,70,99)}:d)),Et(u=>({...u,[t]:(u[t]||0)+1})),T(u=>u-s),h(`‚ö° PC upgraded! +${i} power, +${x} stability - beast mode activated!`)}function ka(t){if(Z.has(t))return V("Already owned.");const s=vt.find(n=>n.id===t);if(s){if(f<s.cost)return V("Not enough cash.");T(n=>n-s.cost),Ct(n=>new Set([...Array.from(n),t])),h(`Purchased ${s.name}.`)}}function Na(){const t=zt();if(f<t)return V("Not enough cash for marketing.");if(!pt())return V("Daily marketing limit reached.");T(n=>n-t),Se(n=>({...n,usesToday:n.usesToday+1})),J(n=>{const o=[...n],r=Ee();if(r.length>0){const i=_s();for(let x=0;x<i;x++)o.unshift(Ve(l,r,qe))}return o});const s=_s();h(`üì¢ Marketing blast sent! ${s} new leads generated - clients are calling!`)}function At(){confirm("Reset your studio?")&&(m(0),N(!1),y(1),T(1e3),oe(0),ue(!0),G(qs()),I(zs()),J([]),Ct(new Set),Xe(0),Ye({}),Et({}),Ke({boostedType:null,nerfedType:null,cycleStartDay:1,currentCycle:1}),Fe({}),Ae(new Set),Be({lastEventDay:0,eventsToday:0,lastEventId:null}),_e(null),Qe({active:!1,expiresAt:0,skillBoost:0,speedBoost:0}),Ze(!1),et(3),tt({}),st(!1),ve(!1),rt(!1),Se({lastUseDay:0,usesToday:0}),it(0),ge(null),ot(null),ct([]),Tt([]),Rt([]),Dt({fps:0,renderTime:0,tickTime:0,memoryUsage:0,renderCount:0,lastFrameTime:0}),dt([]),Le(["Welcome to Car Editor Tycoon! Accept jobs, assign your team, and build a legendary studio."]),St([]),h("New game started."))}function Bt(){const t={version:a.gameVersion,timestamp:Date.now(),gameState:{tick:l,playing:C,speed:j,cash:f,reputation:k,autoAssign:Re,editors:g,pcs:b,jobs:B,eventLog:De,offerCooldown:ss,purchased:Array.from(Z),revenueHistory:wt,lastAutosave:Mt,managers:R,editorTrainingCount:le,pcUpgradeCount:ee,marketCycle:_,editorWorkHours:ce,graceWindowJobs:Array.from(he),memeEventState:te,blackMarketEffects:K,researchLevels:xe,prestigePoints:q,seasonHighRep:se,achievements:Array.from(z),achievementStats:P,marketingUsage:Y,lastHealthCheck:Je,healthCheckWarning:X,shadowSave:ke,softClampWarnings:lt}},s=JSON.stringify(t,null,2),n=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=`car-editor-tycoon-save-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),h("üíæ Save file exported successfully.")}function Ca(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=s=>{const n=s.target.files[0];if(!n)return;const o=new FileReader;o.onload=r=>{try{const i=JSON.parse(r.target.result);if(i.version!==a.gameVersion&&!confirm(`Save version mismatch!

Save version: ${i.version}
Current version: ${a.gameVersion}

This may cause compatibility issues. Continue anyway?`))return;const x={cash:f,reputation:k,editors:g.length,pcs:b.length,jobs:B.length,purchased:Z.size},u={cash:i.gameState.cash,reputation:i.gameState.reputation,editors:i.gameState.editors.length,pcs:i.gameState.pcs.length,jobs:i.gameState.jobs.length,purchased:i.gameState.purchased.length},d=Object.keys(x).map(M=>{const p=x[M],E=u[M],v=E-p;return`${M}: ${p} ‚Üí ${E} (${v>=0?"+":""}${v})`}).join(`
`);if(!confirm(`Import save file?

${d}

This will overwrite your current game. Continue?`))return;m(i.gameState.tick),N(i.gameState.playing),y(i.gameState.speed),T(i.gameState.cash),oe(i.gameState.reputation),ue(i.gameState.autoAssign),G(i.gameState.editors),I(i.gameState.pcs),J(i.gameState.jobs),Le(i.gameState.eventLog),Nt(i.gameState.offerCooldown),Ct(new Set(i.gameState.purchased)),St(i.gameState.revenueHistory),as(i.gameState.lastAutosave||0),Xe(i.gameState.managers||0),Ye(i.gameState.editorTrainingCount||{}),Et(i.gameState.pcUpgradeCount||{}),Ke(i.gameState.marketCycle||{boostedType:null,nerfedType:null,cycleStartDay:1,currentCycle:1}),Fe(i.gameState.editorWorkHours||{}),Ae(new Set(i.gameState.graceWindowJobs||[])),Be(i.gameState.memeEventState||{lastEventDay:0,eventsToday:0,lastEventId:null}),Qe(i.gameState.blackMarketEffects||{active:!1,expiresAt:0,skillBoost:0,speedBoost:0}),tt(i.gameState.researchLevels||{}),at(i.gameState.prestigePoints||0),nt(i.gameState.seasonHighRep||0),Pt(new Set(i.gameState.achievements||[])),ye(i.gameState.achievementStats||{flawlessDeliveries:0,overnightJobs:0,speedDemonJobs:0,qualityMasterJobs:0,maxWorkHours:0,marketCycles:0,maxResearchCategories:0}),Se(i.gameState.marketingUsage||{lastUseDay:0,usesToday:0}),it(i.gameState.lastHealthCheck||0),ge(i.gameState.healthCheckWarning||null),ot(i.gameState.shadowSave||null),ct(i.gameState.softClampWarnings||[]),Tt(i.gameState.commandHistory||[]),Rt(i.gameState.changelog||[]),Dt(i.gameState.performanceMetrics||{fps:0,renderTime:0,tickTime:0,memoryUsage:0,renderCount:0,lastFrameTime:0}),dt(i.gameState.performanceWarnings||[]),h("üíæ Save file imported successfully.")}catch(i){V("Invalid save file format."),console.error("Import error:",i)}},o.readAsText(n)},t.click()}const Ge=Math.floor(l/24)+1,_t=xt.filter(t=>t.status==="available"),Jt=xt.filter(t=>t.status==="active"),bs=xt.filter(t=>t.status==="done"),vs=xt.filter(t=>t.status==="failed");c.useMemo(()=>k>=60?"Legend":k>=30?"Pro":k>=10?"Solid":k>=0?"Rookie":"Risky",[k]);const ys=c.useMemo(()=>{const t=g.length;let s=1;if(t>a.balance.efficiencyDecayStart){const r=(t-a.balance.efficiencyDecayStart)*a.balance.efficiencyDecayRate;s=Math.max(a.balance.efficiencyMin,1-r)}const n=R*a.balance.managerEfficiencyBonus;return s=Math.min(1,s+n),s},[g.length,R]),Ut=a.balance.managerUnlockThresholds.filter(t=>g.length>=t).length,wa=R<Ut&&R<a.balance.maxManagers,It=()=>Math.round(a.balance.hireEditor.baseCost*Math.pow(a.balance.hireEditor.scalingFactor,g.length)),Ot=()=>Math.round(a.balance.buyPC.baseCost*Math.pow(a.balance.buyPC.scalingFactor,b.length)),Ht=t=>{const s=le[t]||0;return Math.round(a.balance.trainEditor.baseCost*Math.pow(a.balance.trainEditor.scalingFactor,s))},Wt=t=>{const s=ee[t]||0;return Math.round(a.balance.upgradePC.baseCost*Math.pow(a.balance.upgradePC.scalingFactor,s))},Sa=t=>{const s=le[t]||0,n=Math.pow(a.balance.upgradeEffectiveness.skillGain.diminishingFactor,s),o=a.balance.upgradeEffectiveness.skillGain.base*n,r=a.balance.upgradeEffectiveness.skillGain.variance;return Math.round(o+W(-r,r))},Ma=t=>{const s=ee[t]||0,n=Math.pow(a.balance.upgradeEffectiveness.pcPowerGain.diminishingFactor,s),o=a.balance.upgradeEffectiveness.pcPowerGain.base*n,r=a.balance.upgradeEffectiveness.pcPowerGain.variance;return Math.round(o+W(-r,r))},Ea=t=>{const s=ee[t]||0,n=Math.pow(a.balance.upgradeEffectiveness.pcStabilityGain.diminishingFactor,s),o=a.balance.upgradeEffectiveness.pcStabilityGain.base*n,r=a.balance.upgradeEffectiveness.pcStabilityGain.variance;return Math.round(o+W(-r,r))},fe=()=>{const t=g.length*a.balance.overhead.softwareLicense.perEditor+b.length*a.balance.overhead.softwareLicense.perPC,s=a.balance.overhead.facility.baseCost+Math.log(g.length+b.length+1)*a.balance.overhead.facility.logarithmicFactor;return Math.round(t+s)},Me=()=>{const t=1-Ls(),s=g.reduce((o,r)=>o+r.salary*t,0),n=R*a.balance.managerSalary;return Math.round(s+n)},js=()=>{const t=Me(),s=fe(),n=t+s;return f-n},Pa=()=>js()<0,ks=()=>bt.find(t=>k>=t.reputationRequired)||bt[0],Ee=()=>{const t=ks();return Kt.filter(s=>s.tier<=t.reputationRequired)},qe=(t,s)=>{let n=s;const o=bt.find(r=>r.reputationRequired>=t.tier)||bt[0];return n*=o.multiplier,_.boostedType===t.name?n*=a.balance.marketCycle.boostMultiplier:_.nerfedType===t.name&&(n*=a.balance.marketCycle.nerfMultiplier),Math.round(n)},$a=()=>{if(Ge-_.cycleStartDay>=a.balance.marketCycle.cycleLength){const s=Kt.map(r=>r.name),n=s[Math.floor(Math.random()*s.length)];let o;do o=s[Math.floor(Math.random()*s.length)];while(o===n);Ke({boostedType:n,nerfedType:o,cycleStartDay:Ge,currentCycle:_.currentCycle+1}),ye(r=>({...r,marketCycles:r.marketCycles+1})),h(`üìà Market cycle ${_.currentCycle+1}: ${n} boosted, ${o} nerfed.`)}},Ns=t=>{const s=a.balance.jobMechanics.pcCrash.baseChance,n=t.stability/100*a.balance.jobMechanics.pcCrash.stabilityFactor;return Math.max(0,s-n)},Cs=t=>(ce[t]||0)>a.balance.jobMechanics.burnout.threshold,Ta=t=>Cs(t)?a.balance.jobMechanics.burnout.energyDrainMultiplier:1,Ra=t=>t.progress/t.timeRequired>=a.balance.jobMechanics.graceWindow.threshold&&!he.has(t.id)&&l>=t.deadline,ws=t=>t.deadline+a.balance.jobMechanics.graceWindow.extraHours,Ss=()=>Math.floor(l/24),Da=()=>{const t=Ss(),s=te.lastEventDay,n=te.eventsToday;return t>s?(Be(o=>({...o,lastEventDay:t,eventsToday:0})),!1):n>=a.balance.memeEvents.maxPerDay?!1:Math.random()<a.balance.memeEvents.dailyChance},La=()=>{const t=a.balance.memeEvents.events,s=t[Math.floor(Math.random()*t.length)];T(o=>o+s.cashDelta),Be(o=>({...o,eventsToday:o.eventsToday+1,lastEventId:s.id})),_e(s);const n=s.cashDelta>0?"+":"";h(`${s.icon} ${s.title}: ${n}$${Math.abs(s.cashDelta)}`),setTimeout(()=>{_e(null)},3e3)},ae=()=>K.active&&l<K.expiresAt,Gt=()=>ae()?K.skillBoost:0,qt=()=>ae()?K.speedBoost:0,Fa=()=>{if(f<a.balance.blackMarket.crackedPlugins.cost){h("‚ùå Not enough cash for cracked plugins.");return}T(s=>s-a.balance.blackMarket.crackedPlugins.cost);const t=l+a.balance.blackMarket.crackedPlugins.duration;Qe({active:!0,expiresAt:t,skillBoost:a.balance.blackMarket.crackedPlugins.skillBoost,speedBoost:a.balance.blackMarket.crackedPlugins.speedBoost}),h("üñ§ Cracked plugins installed. Massive performance boost active for 24h."),Math.random()<a.balance.blackMarket.crackedPlugins.virusRisk&&setTimeout(()=>{Aa()},2e3)},Aa=()=>{Ze(!0),h("üö® WARNING: MALICIOUS CODE DETECTED! SYSTEM COMPROMISED!");const t=setInterval(()=>{et(s=>s<=1?(clearInterval(t),setTimeout(()=>{At(),Ze(!1),et(3)},1e3),0):s-1)},1e3)},Ba=()=>{Bt(),h("üíæ Emergency save exported before system reset.")},ze=t=>xe[t]||0,Ms=t=>{const s=ze(t);return s>=a.balance.research.maxLevel?1/0:Math.round(a.balance.research.baseCost*Math.pow(a.balance.research.costMultiplier,s))},Pe=t=>{const s=a.balance.research.upgrades.find(n=>n.id===t);return s?ze(t)*s.value:0},_a=t=>{const s=Ms(t);if(f<s){h("‚ùå Not enough cash for research.");return}const n=a.balance.research.upgrades.find(r=>r.id===t);if(!n)return;T(r=>r-s),tt(r=>({...r,[t]:(r[t]||0)+1}));const o=Object.values(xe).filter(r=>r>=a.balance.research.maxLevel).length;ye(r=>({...r,maxResearchCategories:Math.max(r.maxResearchCategories,o+1)})),h(`üî¨ ${n.name} upgraded to level ${ze(t)+1}.`)},Es=()=>Pe("progress_boost"),Ps=()=>Pe("payout_boost"),$s=()=>Pe("fail_penalty_reduction"),Ts=()=>Pe("energy_efficiency"),Rs=()=>Pe("reputation_gain"),$e=()=>k>=a.balance.prestige.requirements.reputation&&f>=a.balance.prestige.requirements.cash,Te=t=>{const s=a.balance.prestige.perks.find(n=>n.id===t);return s?q*s.value:0},Ds=()=>Te("spawn_rate"),Ls=()=>Te("salary_reduction"),Fs=()=>Te("training_efficiency"),As=()=>Te("pc_efficiency"),Bs=()=>Te("energy_efficiency"),Ja=()=>{if(!$e()){h("‚ùå Cannot prestige: need Rep 100+ and $10,000+ cash.");return}k>se&&nt(k),at(t=>t+1),At(),at(q+1),nt(Math.max(se,k)),h("üåü PRESTIGE COMPLETE! You've earned 1 Prestige Point and unlocked meta perks!"),ve(!1)},zt=()=>{const t=Math.floor(l/24);return t>Y.lastUseDay?(Se({lastUseDay:t,usesToday:0}),a.marketing.baseCost):Math.round(a.marketing.baseCost*Math.pow(a.marketing.costMultiplier,Y.usesToday))},pt=()=>{const t=Math.floor(l/24);return t>Y.lastUseDay?(Se({lastUseDay:t,usesToday:0}),!0):Y.usesToday<a.marketing.maxUsesPerDay},_s=()=>Math.random()<.3?a.marketing.leadCount.max:a.marketing.leadCount.min,Vt=()=>a.reputationTiers.find(t=>k>=t.min&&k<=t.max)||a.reputationTiers[0],be=()=>a.reputationUnlocks.find(t=>k<t.reputation),Ua=async()=>{throw new Error("Leaderboard endpoint not configured")},Ia=async(t,s)=>{throw new Error("Request handle endpoint not configured")},Oa=()=>[{rank:1,handle:"speed_demon",reputation:245,cash:125e3,jobsCompleted:89,funniestEvent:"Adobe charged me 3 times in one day"},{rank:2,handle:"quality_king",reputation:198,cash:98e3,jobsCompleted:76,funniestEvent:"Client asked for 'more cinematic' on a 15s ad"},{rank:3,handle:"studio_boss",reputation:167,cash:75e3,jobsCompleted:65,funniestEvent:"PC crashed during final render"},{rank:4,handle:"overnight_warrior",reputation:134,cash:62e3,jobsCompleted:52,funniestEvent:"Worked 48 hours straight, forgot to eat"},{rank:5,handle:"reputation_master",reputation:112,cash:48e3,jobsCompleted:43,funniestEvent:"Client loved the 'wrong' version"}],Ha=()=>({cash:f,reputation:k,editors:g,pcs:b,jobs:B,logs,managers:R,editorTrainingCount:le,pcUpgradeCount:ee,marketCycle:_,editorWorkHours:ce,graceWindowJobs:he,memeEventState:te,activeMemeEvent:rs,blackMarketEffects:K,virusWarning:Zs,virusCountdown:is,researchLevels:xe,showResearchPanel:os,prestigePoints:q,seasonHighRep:se,showPrestigeModal:ls,achievements:z,achievementStats:P,showAchievementsPanel:cs,marketingUsage:Y,lastHealthCheck:Je,healthCheckWarning:X,shadowSave:ke,softClampWarnings:lt,commandHistory:Ie,changelog:we,performanceMetrics:pe,performanceWarnings:Lt}),Js=t=>{T(t.cash),oe(t.reputation),G(t.editors),setPcs(t.pcs),J(t.jobs),setLogs(t.logs),Xe(t.managers),Ye(t.editorTrainingCount),setPcUpgradeCount(t.pcUpgradeCount),Ke(t.marketCycle),Fe(t.editorWorkHours),Ae(t.graceWindowJobs),Be(t.memeEventState),_e(t.activeMemeEvent),Qe(t.blackMarketEffects),Ze(t.virusWarning),et(t.virusCountdown),tt(t.researchLevels),st(t.showResearchPanel),at(t.prestigePoints),nt(t.seasonHighRep),ve(t.showPrestigeModal),Pt(t.achievements),ye(t.achievementStats),rt(t.showAchievementsPanel),Se(t.marketingUsage),it(t.lastHealthCheck),ge(t.healthCheckWarning),ot(t.shadowSave),ct(t.softClampWarnings)},ft=(t,s)=>typeof t=="number"&&(isNaN(t)||!isFinite(t))?`NaN/Infinity detected in ${s}: ${t}`:null,Wa=(t,s,n)=>t-s<0?`Negative cash would result from ${n}: ${t} - ${s} = ${t-s}`:null,Ga=()=>{const t=[];return g.forEach(s=>{s.salary>a.healthCheck.softClamps.maxSalary&&t.push(`Editor salary clamped: ${s.salary} ‚Üí ${a.healthCheck.softClamps.maxSalary}`)}),B.forEach(s=>{s.pay>a.healthCheck.softClamps.maxPayout&&t.push(`Job payout clamped: ${s.pay} ‚Üí ${a.healthCheck.softClamps.maxPayout}`)}),f>a.healthCheck.softClamps.maxCash&&t.push(`Cash clamped: ${f} ‚Üí ${a.healthCheck.softClamps.maxCash}`),k>a.healthCheck.softClamps.maxReputation&&t.push(`Reputation clamped: ${k} ‚Üí ${a.healthCheck.softClamps.maxReputation}`),g.length>a.healthCheck.softClamps.maxEditors&&t.push(`Editor count clamped: ${g.length} ‚Üí ${a.healthCheck.softClamps.maxEditors}`),b.length>a.healthCheck.softClamps.maxPCs&&t.push(`PC count clamped: ${b.length} ‚Üí ${a.healthCheck.softClamps.maxPCs}`),t},qa=()=>{const t=Math.floor(l/24);if(t-Je<a.healthCheck.interval)return;console.log(`Running health check (day ${t})...`);const n=Ha();ot(n);let o=f,r=k,i=[...g],x=[...b],u=[...B],d=l,S=0,M=[];for(let v=0;v<a.healthCheck.simulationDays;v++)for(let w=0;w<24;w++){if(d++,Math.random()<.1){S++;const $=Ee();$.length>0&&u.unshift(Ve(d,$,qe))}if(u.forEach($=>{if($.status==="active"){const U=Math.max(.35,1-(i.length-10)*.02),re=(i.length*.1+x.length*.05)*U;$.progress+=re,$.progress>=100&&($.status="done",o+=$.pay,r+=2)}}),w===23){const $=i.reduce((re,O)=>re+O.salary,0),U=a.balance.overhead.softwareLicenses*(i.length+x.length)+a.balance.overhead.facilityCost+Math.log(i.length+x.length+1)*a.balance.overhead.facilityScaling;o-=$+U}const L=[ft(o,"cash"),ft(r,"reputation"),...i.map($=>ft($.salary,"editor salary")),...x.map($=>ft($.power,"pc power"))].filter(Boolean);L.length>0&&M.push(...L);const D=Wa(o,0,"daily operations");D&&M.push(D)}const p=S/a.healthCheck.simulationDays;p<a.healthCheck.minLeadsPerDay&&M.push(`Insufficient leads generated: ${p.toFixed(2)} per day (min: ${a.healthCheck.minLeadsPerDay})`);const E=Ga();E.length>0&&ct(E),M.length>0?(console.warn("Health check failed:",M),ge({type:"error",title:"Game Integrity Check Failed",message:"Potential corruption detected. Consider exporting your save and refreshing.",errors:M,canRevert:!0})):(console.log("Health check passed"),ge(null)),it(t)},ne=(t,s,n=null)=>{const o={id:Date.now(),timestamp:new Date().toISOString(),type:t,message:s,details:n,gameVersion:a.gameVersion,tick:l,day:Math.floor(l/24)};Rt(r=>{const i=[o,...r.slice(0,a.dev.changelogMaxEntries-1)];return A("changelog",i),i})},za=()=>{const t={version:a.gameVersion,timestamp:new Date().toISOString(),gameState:{tick:l,day:Math.floor(l/24),cash:f,reputation:k,editors:g.length,pcs:b.length,jobs:B.length,managers:R,prestigePoints:q,achievements:z.size},eventLog:De,changelog:we,commandHistory:Ie},s=JSON.stringify(t,null,2),n=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=`car-editor-tycoon-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),ne("dev","Logs exported",{exportedAt:new Date().toISOString()}),h("üìã Logs exported successfully.")},Va=()=>{console.log("Running performance test..."),ne("dev","Performance test started",{timestamp:Date.now(),currentState:{editors:g.length,pcs:b.length,jobs:B.length,speed:j}}),performance.now();const t=Array.from({length:150},(w,L)=>({id:`test-editor-${L}`,name:`Test Editor ${L}`,skill:50+Math.random()*50,speed:1+Math.random()*2,energy:100,salary:100+Math.random()*200,assignedJobId:null,resting:!1,onboardingComplete:0})),s=Array.from({length:100},(w,L)=>({id:`test-pc-${L}`,name:`Test PC ${L}`,power:50+Math.random()*100,stability:.8+Math.random()*.2,assignedJobId:null})),n=Array.from({length:100},(w,L)=>({id:`test-job-${L}`,type:"Commercial",client:`Test Client ${L}`,description:`Test job ${L}`,difficulty:50+Math.random()*50,timeRequired:100,payout:1e3+Math.random()*5e3,deadline:l+24*7,progress:Math.random()*100,status:Math.random()>.5?"active":"available",accepted:!1,assignedEditorId:null,assignedPCId:null})),o=j,r=g,i=b,x=B;G(t),I(s),J(n),y(8);const u=performance.now();let d=0,S=0;for(let w=0;w<100;w++){const L=performance.now(),D=[];D.push(()=>m(O=>O+1));const $=n.map(O=>O.status==="active"&&Math.random()>.5?{...O,progress:Math.min(100,O.progress+Math.random()*10)}:O);D.push(()=>J($));const U=t.map(O=>O.energy<100?{...O,energy:Math.min(100,O.energy+Math.random()*5)}:O);D.push(()=>G(U)),Us(D);const re=performance.now();d+=re-L,S++}const p=performance.now()-u,E=d/S;G(r),I(i),J(x),y(o);const v={totalTime:p.toFixed(2),avgTickTime:E.toFixed(2),ticksPerSecond:(1e3/E).toFixed(1),targetFPS:a.dev.performance.targetFPS,maxTickTime:a.dev.performance.maxTickTime,passed:E<=a.dev.performance.maxTickTime};return ne("dev","Performance test completed",v),h(`üî¨ Performance test: ${v.avgTickTime}ms/tick, ${v.ticksPerSecond} ticks/sec ${v.passed?"‚úÖ":"‚ùå"}`),v},Xa=(t=a.dev.simulationDays)=>{const s=l,n=f,o=k,r=B.length;console.log(`Running ${t}-day simulation...`),ne("dev",`${t}-day simulation started`,{startTick:s,startCash:n,startReputation:o,startJobs:r});let i=f,x=k,u=[...g],d=[...b],S=[...B],M=l,p=0,E=0;for(let w=0;w<t;w++)for(let L=0;L<24;L++){if(M++,Math.random()<.1){p++;const D=Ee();D.length>0&&S.unshift(Ve(M,D,qe))}if(S.forEach(D=>{if(D.status==="active"){const $=Math.max(.35,1-(u.length-10)*.02),U=(u.length*.1+d.length*.05)*$;D.progress+=U,D.progress>=100&&(D.status="done",i+=D.pay,x+=2,E++)}}),L===23){const D=u.reduce((U,re)=>U+re.salary,0),$=a.balance.overhead.softwareLicenses*(u.length+d.length)+a.balance.overhead.facilityCost+Math.log(u.length+d.length+1)*a.balance.overhead.facilityScaling;i-=D+$}}const v={days:t,cashGain:i-n,reputationGain:x-o,jobsCompleted:E,leadsGenerated:p,finalCash:i,finalReputation:x};return ne("dev",`${t}-day simulation completed`,v),h(`üîÆ ${t}-day simulation: +$${v.cashGain.toLocaleString()}, +${v.reputationGain} rep, ${v.jobsCompleted} jobs completed`),v},Ya=t=>{const s=Math.min(t,a.dev.maxCashFill),n=f;T(s),ne("dev","Cash filled",{oldCash:n,newCash:s,requested:t}),h(`üí∞ Cash filled to $${s.toLocaleString()}`)},Ka=t=>{const s=Math.min(t,a.dev.maxLeadsSpawn),n=Ee();if(n.length===0){h("‚ùå No available job types to spawn leads");return}J(o=>{const r=[...o];for(let i=0;i<s;i++)r.unshift(Ve(l,n,qe));return r}),ne("dev","Leads spawned",{count:s,requested:t}),h(`üìã Spawned ${s} new leads`)},Qa=t=>{if(a.featureFlags.hasOwnProperty(t)){const s=a.featureFlags[t];a.featureFlags[t]=!s,ne("dev",`Feature flag toggled: ${t}`,{flag:t,oldValue:s,newValue:!s}),h(`üîß Feature flag '${t}' ${s?"disabled":"enabled"}`)}else h(`‚ùå Unknown feature flag: ${t}`)},Za=()=>{ke?(Js(ke),ne("dev","Reset to last good save",{resetFrom:"shadowSave"}),h("üîÑ Reset to last known good state")):h("‚ùå No shadow save available")},de=t=>{const s=t.trim().toLowerCase().split(" "),n=s[0],o=s.slice(1);try{switch(n){case"sim":case"simulate":const r=parseInt(o[0])||a.dev.simulationDays;Xa(r);break;case"cash":case"fill":const i=parseInt(o[0])||1e5;Ya(i);break;case"leads":case"spawn":const x=parseInt(o[0])||5;Ka(x);break;case"flag":case"toggle":const u=o[0];u?Qa(u):h("‚ùå Please specify a feature flag name");break;case"reset":case"revert":Za();break;case"logs":case"export":za();break;case"perf":case"performance":Va();break;case"help":h("üîß Available commands: sim [days], cash [amount], leads [count], flag [name], reset, logs, perf, help");break;default:h(`‚ùå Unknown command: ${n}. Type 'help' for available commands.`)}}catch(r){h(`‚ùå Command error: ${r.message}`)}Tt(r=>[t,...r.slice(0,49)]),He(-1)},me=(t,s)=>{const n=performance.now(),o=t(),i=performance.now()-n;return i>a.dev.performance.maxTickTime&&(console.warn(`Performance warning: ${s} took ${i.toFixed(2)}ms`),dt(x=>[...x.slice(-4),{label:s,duration:i,timestamp:Date.now()}])),{result:o,duration:i}},en=()=>{const t=performance.now(),s=t-pe.lastFrameTime,n=s>0?Math.round(1e3/s):0;Dt(o=>({...o,fps:n,lastFrameTime:t,renderCount:o.renderCount+1,memoryUsage:performance.memory?performance.memory.usedJSHeapSize/1024/1024:0}))},Us=t=>{Vs.startTransition(()=>{t.forEach(s=>s())})},tn=t=>{switch(t){case"flawlessDeliveries":return P.flawlessDeliveries;case"largeTeam":return g.length+R;case"overnightJobs":return P.overnightJobs;case"highReputation":return k;case"richStudio":return f;case"speedDemon":return P.speedDemonJobs;case"qualityMaster":return P.qualityMasterJobs;case"workaholic":return P.maxWorkHours;case"marketCycler":return P.marketCycles;case"researchMaster":return P.maxResearchCategories;default:return 0}},Q=t=>{if(z.has(t))return;const s=a.achievements[t];s&&(Pt(n=>new Set([...n,t])),h(`üèÜ Achievement Unlocked: ${s.icon} ${s.name}`),sn(s))},sn=t=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 z-50 bg-neutral-900 border-2 border-${t.color.replace("text-","")} rounded-xl p-4 shadow-lg animate-bounce`,s.innerHTML=`
    <div class="flex items-center gap-3">
      <div class="text-2xl">${t.icon}</div>
      <div>
        <div class="font-bold ${t.color}">${t.name}</div>
        <div class="text-sm text-neutral-300">${t.description}</div>
      </div>
    </div>
  `,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},4e3)},an=()=>{P.flawlessDeliveries>=a.achievements.flawlessDeliveries.requirement&&Q("flawlessDeliveries"),g.length+R>=a.achievements.largeTeam.requirement&&Q("largeTeam"),P.overnightJobs>=a.achievements.overnightJobs.requirement&&Q("overnightJobs"),k>=a.achievements.highReputation.requirement&&Q("highReputation"),f>=a.achievements.richStudio.requirement&&Q("richStudio"),P.speedDemonJobs>=a.achievements.speedDemon.requirement&&Q("speedDemon"),P.qualityMasterJobs>=a.achievements.qualityMaster.requirement&&Q("qualityMaster"),P.maxWorkHours>=a.achievements.workaholic.requirement&&Q("workaholic"),P.marketCycles>=a.achievements.marketCycler.requirement&&Q("marketCycler"),P.maxResearchCategories>=a.achievements.researchMaster.requirement&&Q("researchMaster")};function Is(t){var s;return((s=g.find(n=>n.id===t))==null?void 0:s.name)??"‚Äî"}function Os(t){var s;return((s=b.find(n=>n.id===t))==null?void 0:s.name)??"‚Äî"}function h(t){Le(s=>[Xt(),t,...s].slice(0,50))}function Xt(){const t=`Day ${Ge}`,s=l%24;return`[${t} ‚Ä¢ ${String(s).padStart(2,"0")}:00]`}function V(t){h(`‚ö†Ô∏è ${t}`)}return e.jsxs("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center md:justify-between",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-black tracking-tight",children:["Car Editor Tycoon ",e.jsx("span",{className:"text-orange-400",children:"Œ≤"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>N(t=>!t),className:`px-3 py-2 rounded-xl text-sm font-semibold shadow ${C?"bg-rose-600 hover:bg-rose-500":"bg-emerald-600 hover:bg-emerald-500"}`,children:C?"Pause":"Start"}),e.jsx("button",{onClick:()=>xs(),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-neutral-800 hover:bg-neutral-700",children:"+1 Tick"}),e.jsxs("div",{className:"flex items-center gap-2 bg-neutral-900 px-3 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs opacity-70",children:"Speed"}),e.jsxs("select",{value:j,onChange:t=>y(Number(t.target.value)),className:"bg-neutral-800 rounded-lg text-sm px-2 py-1 focus:outline-none",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:8,children:"8x"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-neutral-900 px-3 py-2 rounded-xl text-sm",children:[e.jsx("input",{type:"checkbox",checked:Re,onChange:t=>ue(t.target.checked)}),"Auto‚Äëassign"]}),Ne&&e.jsxs("label",{className:"flex items-center gap-2 bg-neutral-900 px-3 py-2 rounded-xl text-sm",children:[e.jsx("input",{type:"checkbox",checked:ns,onChange:t=>Qs(t.target.checked)}),"Dev Overlay"]}),e.jsx("button",{onClick:Bt,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-blue-600 hover:bg-blue-500",children:"Export"}),e.jsx("button",{onClick:Ca,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-purple-600 hover:bg-purple-500",children:"Import"}),a.cloudBackupUrl,e.jsx("button",{onClick:At,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-neutral-900 hover:bg-neutral-800",children:"Reset"}),e.jsx("button",{onClick:()=>st(!0),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-blue-600 hover:bg-blue-500",children:"üî¨ Research"}),a.featureFlags.prestige&&e.jsxs("button",{onClick:()=>ve(!0),className:`px-3 py-2 rounded-xl text-sm font-semibold shadow ${$e()?"bg-purple-600 hover:bg-purple-500":"bg-neutral-700 opacity-60"}`,title:$e()?"Prestige: Reset for meta perks":"Need Rep 100+ and $10,000+ to prestige",children:["üåü Prestige ",q>0&&`(${q})`]}),e.jsxs("button",{onClick:()=>rt(!0),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-yellow-600 hover:bg-yellow-500",children:["üèÜ Achievements ",z.size>0&&`(${z.size})`]}),e.jsx("button",{onClick:()=>ms("leaderboard"),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-indigo-600 hover:bg-indigo-500",children:"üìä Leaderboard"}),Ne&&e.jsx("button",{onClick:()=>Ue(!0),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-purple-600 hover:bg-purple-500",children:"üîß Commands"}),Ne&&e.jsxs("button",{onClick:()=>hs(!0),className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-gray-600 hover:bg-gray-500",children:["üìã Changelog ",we.length>0&&`(${we.length})`]}),e.jsx("button",{onClick:ma,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-purple-600 hover:bg-purple-500",children:"üì∏ Share Run"})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 md:mt-0",children:a.balance.research.upgrades.map(t=>{const s=ze(t.id);return s===0?null:e.jsx("div",{className:"text-lg cursor-help",title:`${t.name} - Level ${s} (${t.tooltip})`,children:t.icon},t.id)})})]}),Pa()&&e.jsx("div",{className:"mt-4 bg-red-900/60 border border-red-700/60 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-300",children:"Payroll Risk"}),e.jsxs("p",{className:"text-sm text-red-200",children:["Projected cash tomorrow: ",e.jsxs("span",{className:"font-bold",children:["$",js().toLocaleString()]}),"(Daily burn: $",(Me()+fe()).toLocaleString(),")"]})]})]})}),X&&e.jsx("div",{className:"mt-4 bg-red-900/60 border border-red-700/60 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"üîç"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-300",children:X.title}),e.jsx("p",{className:"text-sm text-red-200 mb-2",children:X.message}),X.errors&&e.jsxs("div",{className:"text-xs text-red-200 mb-3",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Issues detected:"}),X.errors.slice(0,3).map((t,s)=>e.jsxs("div",{className:"ml-2",children:["‚Ä¢ ",t]},s)),X.errors.length>3&&e.jsxs("div",{className:"ml-2 text-red-300",children:["... and ",X.errors.length-3," more"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Bt,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded-lg text-xs font-semibold",children:"üìÅ Export Save"}),X.canRevert&&ke&&e.jsx("button",{onClick:()=>{confirm("Revert to last known good state? This will undo recent changes.")&&(Js(ke),ge(null))},className:"px-3 py-1 bg-orange-600 hover:bg-orange-500 rounded-lg text-xs font-semibold",children:"üîÑ Revert Changes"}),e.jsx("button",{onClick:()=>ge(null),className:"px-3 py-1 bg-neutral-700 hover:bg-neutral-600 rounded-lg text-xs font-semibold",children:"‚úï Dismiss"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-9 gap-3 mt-4",children:[e.jsx(ie,{label:"Cash",value:`$${f.toLocaleString()}`,sub:"Budget"}),e.jsx(ie,{label:"Reputation",value:`${k}`,sub:`${Vt().name} ‚Ä¢ ${be()?`${be().reputation-k} to ${be().description}`:"Max tier"}`}),e.jsx(ie,{label:"Day",value:`${Ge}`,sub:`Hour ${String(l%24).padStart(2,"0")}:00`}),e.jsx(ie,{label:"Active Jobs",value:`${Jt.length}`,sub:`${_t.length} waiting`}),e.jsx(ie,{label:"Team",value:`${g.length} editors`,sub:`${R} managers ‚Ä¢ ${(ys*100).toFixed(0)}% efficiency`}),e.jsx(ie,{label:"Job Tier",value:ks().name,sub:`Rep ${k} ‚Ä¢ ${Ee().length}/${Kt.length} types`}),e.jsx(ie,{label:"Daily Burn",value:`$${(Me()+fe()).toLocaleString()}`,sub:`Salaries $${Me()} ‚Ä¢ Overhead $${fe()}`}),e.jsx(ie,{label:"Upgrades",value:`${Z.size}/${vt.length}`,sub:`Spawn ${(mt*100).toFixed(0)}% ‚Ä¢ Lead cap ${ut}`}),a.featureFlags.prestige&&e.jsx(ie,{label:"Prestige",value:`${q} pts`,sub:`Season High: ${se} rep`})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4 mt-4",children:[e.jsxs("section",{className:"xl:col-span-4 bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Leads & Inquiries"}),_.boostedType&&e.jsxs("div",{className:"text-xs bg-green-900/60 border border-green-700/60 px-2 py-1 rounded",children:["üìà ",_.boostedType," boosted"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{onClick:Na,disabled:!pt(),className:`px-3 py-2 rounded-xl text-sm font-semibold shadow ${pt()?"bg-orange-600 hover:bg-orange-500":"bg-neutral-700 opacity-60"}`,title:pt()?`Marketing: ${Y.usesToday}/${a.marketing.maxUsesPerDay} uses today`:"Daily marketing limit reached",children:["Run Marketing (‚àí$",zt(),")"]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Spawn rate: ",(mt*100).toFixed(0),"% (cap ",ut,") ‚Ä¢ Uses: ",Y.usesToday,"/",a.marketing.maxUsesPerDay]})]}),e.jsxs("div",{className:"space-y-3 max-h-[420px] overflow-auto pr-2",children:[_t.length===0&&e.jsx("div",{className:"text-sm opacity-60",children:"No leads right now. Try marketing or wait for inquiries."}),_t.map(t=>e.jsxs("div",{className:"rounded-xl p-3 bg-neutral-800/70 border border-neutral-700/60",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-semibold",children:[t.type,_.boostedType===t.type&&e.jsx("span",{className:"ml-2 text-xs bg-green-600 text-white px-1.5 py-0.5 rounded",children:"üìà"}),_.nerfedType===t.type&&e.jsx("span",{className:"ml-2 text-xs bg-red-600 text-white px-1.5 py-0.5 rounded",children:"üìâ"})]}),e.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:["$",t.payout.toLocaleString()]})]}),e.jsx("div",{className:"text-sm opacity-80",children:t.clientName}),e.jsx("div",{className:"text-xs opacity-70",children:t.brand}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[e.jsxs(yt,{children:["Req ",t.difficulty]}),e.jsxs(yt,{children:["Hours ",t.timeRequired]}),he.has(t.id)?e.jsxs(yt,{className:"bg-orange-900 border-orange-700",children:["Grace: ",Math.max(ws(t)-l,0),"h"]}):e.jsxs(yt,{children:["Due in ",Math.max(t.deadline-l,0),"h"]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:()=>xa(t.id),className:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-emerald-600 hover:bg-emerald-500",children:"Accept"}),e.jsx("button",{onClick:()=>ps(t.id,"Declined"),className:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-neutral-700 hover:bg-neutral-600",children:"Decline"})]})]},t.id))]})]}),e.jsxs("section",{className:"xl:col-span-5 bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-3",children:"Production Board"}),e.jsxs("div",{className:"space-y-3 max-h-[520px] overflow-auto pr-2",children:[Jt.length===0&&e.jsx("div",{className:"text-sm opacity-60",children:"No active jobs. Accept a lead and assign staff."}),Jt.map(t=>e.jsxs("div",{className:"rounded-xl p-3 bg-neutral-800/70 border border-neutral-700/60",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[t.type,_.boostedType===t.type&&e.jsx("span",{className:"ml-2 text-xs bg-green-600 text-white px-1.5 py-0.5 rounded",children:"üìà"}),_.nerfedType===t.type&&e.jsx("span",{className:"ml-2 text-xs bg-red-600 text-white px-1.5 py-0.5 rounded",children:"üìâ"})]}),e.jsx("div",{className:"text-xs opacity-70",children:t.brand})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-emerald-400",children:["$",t.payout.toLocaleString()]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Due in ",Math.max(t.deadline-l,0),"h"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{className:"bg-neutral-900/70 rounded-lg p-2",children:[e.jsx("div",{className:"opacity-70 text-xs",children:"Editor"}),e.jsx("div",{className:"font-semibold",children:Is(t.assignedEditorId)})]}),e.jsxs("div",{className:"bg-neutral-900/70 rounded-lg p-2",children:[e.jsx("div",{className:"opacity-70 text-xs",children:"Workstation"}),e.jsx("div",{className:"font-semibold",children:Os(t.assignedPCId)})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(fn,{value:Math.round(t.progress/t.timeRequired*100)})}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:()=>Ft(t.id),className:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-neutral-700 hover:bg-neutral-600",children:"Unassign"}),e.jsx("button",{onClick:()=>gs(t.id),className:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-neutral-700 hover:bg-neutral-600",children:"Auto‚Äëassign"})]})]},t.id)),(bs.length>0||vs.length>0)&&e.jsxs("div",{className:"pt-2 border-t border-neutral-800/60",children:[e.jsx("h3",{className:"text-sm font-bold mb-2 opacity-80",children:"History"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[bs.slice(0,6).map(t=>e.jsxs("div",{className:"rounded-lg p-2 bg-neutral-800/70 border border-neutral-700/60 text-xs",children:["‚úÖ ",t.type," ‚Ä¢ ",t.brand," ‚Ä¢ $",t.payout]},t.id)),vs.slice(0,6).map(t=>e.jsxs("div",{className:"rounded-lg p-2 bg-neutral-800/70 border border-neutral-700/60 text-xs",children:["‚ùå ",t.type," ‚Ä¢ ",t.brand]},t.id))]})]})]})]}),e.jsxs("section",{className:"xl:col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-3",children:"Team & Upgrades"}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("button",{onClick:fa,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-sky-600 hover:bg-sky-500",children:["Hire Editor (‚àí$",It(),")"]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Remaining friends: ",fs().length]}),e.jsxs("button",{onClick:va,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-fuchsia-600 hover:bg-fuchsia-500",children:["Buy PC (‚àí$",Ot(),")"]})]}),wa&&e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("button",{onClick:ba,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-amber-600 hover:bg-amber-500",children:["Hire Manager (‚àí$ ",2e3+R*500,")"]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Managers: ",R,"/",Ut," ‚Ä¢ +",(a.balance.managerEfficiencyBonus*100).toFixed(0),"% efficiency each"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 max-h-[360px] overflow-auto pr-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Editors"}),ua.map(t=>{const s=t.onboardingComplete&&l<t.onboardingComplete,n=s?t.onboardingComplete-l:0;return e.jsxs("div",{className:"rounded-xl p-3 bg-neutral-800/70 border border-neutral-700/60 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-semibold",children:[t.name,t.assignedJobId&&!t.resting&&e.jsx("span",{className:"text-xs opacity-70",children:" ‚Ä¢ busy"}),t.assignedJobId&&t.resting&&e.jsx("span",{className:"text-xs opacity-70",children:" ‚Ä¢ resting"}),s&&e.jsx("span",{className:"text-xs text-orange-400",children:" ‚Ä¢ onboarding"}),Cs(t.id)&&e.jsx("span",{className:"text-xs text-red-400",children:" ‚Ä¢ burnout"})]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Salary $",t.salary,"/day"]})]}),e.jsxs("div",{className:"text-xs opacity-80",children:["Skill ",t.skill+Gt()," ‚Ä¢ Speed ",(t.speed+We.speedBonus+qt()).toFixed(2),"x",s&&e.jsxs("span",{className:"text-orange-400",children:[" ‚Ä¢ ",n,"h remaining"]}),(le[t.id]||0)>0&&e.jsxs("span",{className:"text-blue-400",children:[" ‚Ä¢ Trained ",le[t.id]||0,"x"]}),(ce[t.id]||0)>0&&e.jsxs("span",{className:"text-yellow-400",children:[" ‚Ä¢ Worked ",ce[t.id]||0,"h"]}),ae()&&e.jsx("span",{className:"text-red-400",children:" ‚Ä¢ Cracked plugins active"})]}),e.jsx("div",{className:"mt-1",children:e.jsx(yn,{value:t.energy,label:"Energy"})}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs("button",{onClick:()=>ya(t.id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold bg-neutral-700 hover:bg-neutral-600",children:["Train (‚àí$",Ht(t.id),")"]})})]},t.id)}),g.length>a.dev.performance.maxVisibleEditors&&e.jsxs("div",{className:"text-xs text-neutral-400 text-center py-2",children:["Showing ",a.dev.performance.maxVisibleEditors," of ",g.length," editors"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Workstations"}),ha.map(t=>e.jsxs("div",{className:"rounded-xl p-3 bg-neutral-800/70 border border-neutral-700/60 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-semibold",children:[t.name," ",t.assignedJobId&&e.jsx("span",{className:"text-xs opacity-70",children:"‚Ä¢ busy"})]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Tier ",t.tier]})]}),e.jsxs("div",{className:"text-xs opacity-80",children:["Power ",t.power," ‚Ä¢ Stability ",t.stability,"%",(ee[t.id]||0)>0&&e.jsxs("span",{className:"text-purple-400",children:[" ‚Ä¢ Upgraded ",ee[t.id]||0,"x"]}),e.jsxs("span",{className:"text-gray-400",children:[" ‚Ä¢ ",(Ns(t)*100).toFixed(1),"% crash chance"]})]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs("button",{onClick:()=>ja(t.id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold bg-neutral-700 hover:bg-neutral-600",children:["Upgrade (‚àí$",Wt(t.id),")"]})})]},t.id)),b.length>a.dev.performance.maxVisiblePCs&&e.jsxs("div",{className:"text-xs text-neutral-400 text-center py-2",children:["Showing ",a.dev.performance.maxVisiblePCs," of ",b.length," PCs"]})]})]})]}),e.jsxs("div",{className:"bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-3",children:"Shop ‚Äî Plugins & Memberships"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[360px] overflow-auto pr-2",children:vt.map(t=>{const s=Z.has(t.id);return e.jsx("div",{className:"rounded-xl p-3 bg-neutral-800/70 border border-neutral-700/60",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[t.name," ",s&&e.jsx("span",{className:"text-xs opacity-70",children:"‚Ä¢ owned"})]}),e.jsx("div",{className:"text-xs opacity-80",children:t.desc})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-emerald-400",children:["$",t.cost.toLocaleString()]}),e.jsx("button",{disabled:s||f<t.cost,onClick:()=>ka(t.id),className:`mt-2 px-3 py-1.5 rounded-lg text-xs font-semibold ${s?"bg-neutral-700 opacity-60":f<t.cost?"bg-neutral-700 opacity-80":"bg-emerald-600 hover:bg-emerald-500"}`,children:s?"Owned":"Buy"})]})]})},t.id)})}),e.jsx("div",{className:"text-xs opacity-70 mt-2",children:"Permanent upgrades apply to all editors and persist across sessions."}),a.featureFlags.blackMarket&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-red-500/30",children:[e.jsx("h3",{className:"font-bold text-lg mb-3 text-red-400",children:"üñ§ Black Market"}),e.jsxs("div",{className:"rounded-xl p-3 bg-red-900/20 border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-300",children:"Cracked Plugins"}),e.jsx("div",{className:"text-xs opacity-80 text-red-200",children:a.balance.blackMarket.crackedPlugins.description}),e.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"5% risk of catastrophic virus"})," - may force game reset"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-red-400",children:["$",a.balance.blackMarket.crackedPlugins.cost]}),e.jsx("button",{onClick:Fa,disabled:f<a.balance.blackMarket.crackedPlugins.cost||ae(),className:`mt-2 px-3 py-1.5 rounded-lg text-xs font-semibold ${f<a.balance.blackMarket.crackedPlugins.cost||ae()?"bg-neutral-700 opacity-60":"bg-red-600 hover:bg-red-500"}`,title:"‚ö†Ô∏è WARNING: 5% chance of catastrophic virus that will reset your game!",children:ae()?"Active":"Buy (Risky)"})]})]}),ae()&&e.jsxs("div",{className:"mt-2 text-xs text-red-300",children:["‚è∞ Active for ",Math.max(0,Math.ceil((K.expiresAt-l)/24))," more hours"]})]})]})]})]}),os&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-2xl mx-4 max-h-[80vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üî¨ Research & Development"}),e.jsx("button",{onClick:()=>st(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"text-sm text-neutral-400 mb-4",children:"Permanent global upgrades. Each purchase increases the next cost by 50%."}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.balance.research.upgrades.map(t=>{const s=ze(t.id),n=Ms(t.id),o=Pe(t.id),r=s>=a.balance.research.maxLevel;return e.jsx("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:"font-semibold",children:t.name}),e.jsxs("span",{className:"text-xs bg-neutral-700 px-2 py-1 rounded",children:["Level ",s,"/",a.balance.research.maxLevel]})]}),e.jsx("div",{className:"text-sm text-neutral-300 mb-2",children:t.description}),e.jsxs("div",{className:"text-xs text-neutral-400",children:["Current effect: ",t.effect==="failPenalty"||t.effect==="energyDrain"?"-":"+",(o*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:["$",n.toLocaleString()]}),e.jsx("button",{onClick:()=>_a(t.id),disabled:r||f<n,className:`mt-2 px-4 py-2 rounded-lg font-semibold ${r?"bg-neutral-700 opacity-60":f<n?"bg-neutral-700 opacity-80":"bg-emerald-600 hover:bg-emerald-500"}`,children:r?"Maxed":"Research"})]})]})},t.id)})})]})}),ls&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-2xl mx-4 max-h-[80vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-400",children:"üåü Prestige System"}),e.jsx("button",{onClick:()=>ve(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-xl p-4 mb-4",children:[e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:"Requirements"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:`flex items-center gap-2 ${k>=a.balance.prestige.requirements.reputation?"text-green-400":"text-red-400"}`,children:[k>=a.balance.prestige.requirements.reputation?"‚úì":"‚úó"," Reputation: ",k,"/",a.balance.prestige.requirements.reputation]}),e.jsxs("div",{className:`flex items-center gap-2 ${f>=a.balance.prestige.requirements.cash?"text-green-400":"text-red-400"}`,children:[f>=a.balance.prestige.requirements.cash?"‚úì":"‚úó"," Cash: $",f.toLocaleString(),"/$",a.balance.prestige.requirements.cash.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 mb-4",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Current Status"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Prestige Points: ",e.jsx("span",{className:"text-purple-400 font-bold",children:q})]}),e.jsxs("div",{children:["Season High Reputation: ",e.jsx("span",{className:"text-blue-400 font-bold",children:se})]})]})]}),e.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Meta Perks (Active)"}),e.jsx("div",{className:"text-sm space-y-1",children:a.balance.prestige.perks.map(t=>{const s=Te(t.id);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.icon}),e.jsxs("span",{children:[t.name,":"]}),e.jsxs("span",{className:`font-bold ${s>0?"text-green-400":"text-neutral-400"}`,children:[t.effect==="salaryReduction"||t.effect==="energyEfficiency"?"-":"+",(s*100).toFixed(0),"%"]})]},t.id)})})]})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:Ja,disabled:!$e(),className:`px-6 py-3 rounded-lg font-bold transition-colors ${$e()?"bg-purple-600 hover:bg-purple-500 text-white":"bg-neutral-700 opacity-60 text-neutral-400"}`,children:$e()?"üåü Prestige Now":"Requirements Not Met"}),e.jsx("button",{onClick:()=>ve(!1),className:"px-6 py-3 bg-neutral-700 hover:bg-neutral-600 rounded-lg font-bold transition-colors",children:"Cancel"})]}),e.jsx("div",{className:"text-xs text-neutral-400 mt-4 text-center",children:"‚ö†Ô∏è Prestige will reset your game but keep your prestige points and meta perks"})]})}),cs&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-4xl mx-4 max-h-[80vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-400",children:"üèÜ Achievements"}),e.jsx("button",{onClick:()=>rt(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"text-sm text-neutral-400 mb-4",children:"Unlock achievements by reaching various milestones. These are purely cosmetic badges."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.achievements).map(([t,s])=>{const n=z.has(s.id),o=tn(s.id),r=Math.min(100,o/s.requirement*100);return e.jsxs("div",{className:`rounded-xl p-4 border-2 transition-all ${n?`bg-neutral-800 border-${s.color.replace("text-","")} opacity-100`:"bg-neutral-800/50 border-neutral-700 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`text-2xl ${n?s.color:"text-neutral-500"}`,children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-bold ${n?s.color:"text-neutral-400"}`,children:s.name}),e.jsx("div",{className:"text-sm text-neutral-300",children:s.description})]}),n&&e.jsx("div",{className:"text-green-400 text-xl",children:"‚úì"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-neutral-400",children:"Progress"}),e.jsxs("span",{className:n?s.color:"text-neutral-400",children:[o,"/",s.requirement]})]}),e.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${n?s.color.replace("text-","bg-"):"bg-neutral-600"}`,style:{width:`${r}%`}})})]})]},s.id)})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-neutral-400",children:[z.size,"/",Object.keys(a.achievements).length," achievements unlocked"]})]})}),je&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üèÜ Submit Run"}),e.jsx("button",{onClick:()=>ds(null),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:`p-4 rounded-xl mb-4 ${je.type==="loading"?"bg-blue-900/20 border border-blue-500/30":je.type==="success"?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:e.jsx("div",{className:`text-center ${je.type==="loading"?"text-blue-300":je.type==="success"?"text-green-300":"text-red-300"}`,children:je.message})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>ds(null),className:"px-6 py-2 bg-neutral-700 hover:bg-neutral-600 rounded-lg transition-colors",children:"Close"})})]})})]}),e.jsxs("section",{className:"mt-4 grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"xl:col-span-2 bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-2",children:"Studio Feed"}),e.jsx("div",{className:"max-h-[200px] overflow-auto pr-2 text-sm space-y-1",children:De.map((t,s)=>e.jsx("div",{className:t.startsWith("[")?"text-orange-300/80":"opacity-90",children:t},s))})]}),e.jsxs("div",{className:"bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-2",children:"Tips"}),e.jsxs("ul",{className:"text-sm list-disc pl-5 space-y-1 opacity-90",children:[e.jsx("li",{children:"Shop: plugins boost editor speed; district.jp boosts client flow."}),e.jsx("li",{children:"Start the clock, accept small jobs ‚Äî editors auto‚Äërest and resume at full energy."}),e.jsx("li",{children:"Train editors and upgrade PCs to hit higher difficulty jobs."}),e.jsx("li",{children:"Missed deadlines crush reputation ‚Äî keep an eye on due hours."}),e.jsx("li",{children:"üë• Team efficiency decays after 10 editors; hire managers to offset this."}),e.jsx("li",{children:"üÜï New hires need onboarding time; shown on editor cards."}),e.jsx("li",{children:"üí∞ Costs scale exponentially; upgrades have diminishing returns."}),e.jsx("li",{children:"üí∏ Daily overhead: software licenses + facility costs scale with team size."}),e.jsx("li",{children:"‚ö†Ô∏è Watch for payroll risk warnings when daily burn exceeds cash."}),e.jsx("li",{children:"üèÜ Job tiers unlock at Rep 10/25/50/90; higher tiers pay more."}),e.jsx("li",{children:"üìà Market cycles every 7 days: one job type boosted, one nerfed."}),e.jsx("li",{children:"‚è∞ Grace window: 95%+ jobs get 6h extra with reduced payout."}),e.jsx("li",{children:"üíª PC stability reduces crash chance; burnout after 12h work."}),e.jsx("li",{children:"üé≤ Meme events: Random daily events with cash impacts and animations."}),e.jsx("li",{children:"üñ§ Black Market: Cracked plugins boost performance but risk catastrophic virus."}),e.jsx("li",{children:"üî¨ Research: Permanent global upgrades with increasing costs."}),e.jsx("li",{children:"üåü Prestige: Reset for meta perks when Rep 100+ and $10,000+ cash."}),e.jsx("li",{children:"üèÜ Achievements: Unlock cosmetic badges by reaching various milestones."}),e.jsx("li",{children:"üìà Marketing: Cost scales with daily use; sometimes spawns 3 leads instead of 2."}),e.jsx("li",{children:"‚≠ê Reputation Tiers: Rookie ‚Üí Pro ‚Üí Legend ‚Üí Master ‚Üí Icon with unlock tooltips."}),e.jsx("li",{children:"üìä Leaderboard: Submit runs and compete with other players (requires API configuration)."}),e.jsx("li",{children:"üìß Request Handle: Get a custom handle for leaderboard submissions."}),e.jsx("li",{children:"üîç Health Check: Automatic integrity verification every 7 in-game days with corruption detection."}),e.jsxs("li",{children:["üîß Dev Commands: Press ",e.jsx("code",{children:"`"})," (backtick) to open command palette for testing and debugging."]}),e.jsx("li",{children:"üìã Changelog: Track all feature changes, migrations, and dev actions with detailed timestamps."}),e.jsx("li",{children:"üíæ Game autosaves every 10 ticks and when you switch tabs/windows."}),e.jsx("li",{children:"Export/Import: Download saves as JSON files or load previous saves."}),e.jsx("li",{children:"Cloud backup: Set CONFIG.cloudBackupUrl to enable cloud saves."})]})]})]}),ns&&Ne&&e.jsxs("section",{className:"mt-4 bg-neutral-900/60 rounded-2xl p-4 border border-neutral-800/60",children:[e.jsx("h2",{className:"font-bold text-lg mb-3",children:"Dev Overlay ‚Äî Team Efficiency"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-16 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Efficiency Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{children:"Base Efficiency: 100%"}),g.length>a.balance.efficiencyDecayStart&&e.jsxs("div",{className:"text-orange-400",children:["Decay: -",((g.length-a.balance.efficiencyDecayStart)*a.balance.efficiencyDecayRate*100).toFixed(1),"%"]}),R>0&&e.jsxs("div",{className:"text-green-400",children:["Manager Bonus: +",(R*a.balance.managerEfficiencyBonus*100).toFixed(1),"%"]}),e.jsxs("div",{className:"font-semibold",children:["Final Efficiency: ",(ys*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Manager System"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Current Managers: ",R,"/",Ut]}),e.jsxs("div",{children:["Max Managers: ",a.balance.maxManagers]}),e.jsxs("div",{children:["Manager Salary: $",a.balance.managerSalary,"/day each"]}),e.jsxs("div",{children:["Efficiency Bonus: +",(a.balance.managerEfficiencyBonus*100).toFixed(0),"% each"]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Unlock thresholds: ",a.balance.managerUnlockThresholds.join(", ")," editors"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Cost Scaling"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Hire Editor: $",It()," (",(a.balance.hireEditor.scalingFactor-1)*100,"% growth)"]}),e.jsxs("div",{children:["Buy PC: $",Ot()," (",(a.balance.buyPC.scalingFactor-1)*100,"% growth)"]}),e.jsxs("div",{children:["Train Editor: $",Ht("example")," (",(a.balance.trainEditor.scalingFactor-1)*100,"% growth)"]}),e.jsxs("div",{children:["Upgrade PC: $",Wt("example")," (",(a.balance.upgradePC.scalingFactor-1)*100,"% growth)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Daily Overhead"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Software Licenses: $",g.length*a.balance.overhead.softwareLicense.perEditor+b.length*a.balance.overhead.softwareLicense.perPC,"/day"]}),e.jsxs("div",{children:["Facility Cost: $",Math.round(a.balance.overhead.facility.baseCost+Math.log(g.length+b.length+1)*a.balance.overhead.facility.logarithmicFactor),"/day"]}),e.jsxs("div",{children:["Total Overhead: $",fe(),"/day"]}),e.jsxs("div",{children:["Total Daily Burn: $",Me()+fe(),"/day"]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Software: $",a.balance.overhead.softwareLicense.perEditor,"/editor, $",a.balance.overhead.softwareLicense.perPC,"/PC"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Market Cycle"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Current Cycle: ",_.currentCycle]}),e.jsxs("div",{children:["Days in Cycle: ",Ge-_.cycleStartDay+1,"/",a.balance.marketCycle.cycleLength]}),_.boostedType&&e.jsxs("div",{className:"text-green-400",children:["üìà Boosted: ",_.boostedType," (+",(a.balance.marketCycle.boostMultiplier-1)*100,"%)"]}),_.nerfedType&&e.jsxs("div",{className:"text-red-400",children:["üìâ Nerfed: ",_.nerfedType," (-",(1-a.balance.marketCycle.nerfMultiplier)*100,"%)"]}),e.jsxs("div",{className:"text-xs opacity-70",children:["Cycles every ",a.balance.marketCycle.cycleLength," days"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Work Mechanics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Grace Window: ",(a.balance.jobMechanics.graceWindow.threshold*100).toFixed(0),"% completion"]}),e.jsxs("div",{children:["Grace Hours: +",a.balance.jobMechanics.graceWindow.extraHours,"h"]}),e.jsxs("div",{children:["Grace Payout: ",(a.balance.jobMechanics.graceWindow.payoutMultiplier*100).toFixed(0),"%"]}),e.jsxs("div",{children:["Burnout Threshold: ",a.balance.jobMechanics.burnout.threshold,"h"]}),e.jsxs("div",{children:["Burnout Drain: ",a.balance.jobMechanics.burnout.energyDrainMultiplier,"x"]}),e.jsxs("div",{children:["PC Crash Base: ",(a.balance.jobMechanics.pcCrash.baseChance*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs opacity-70",children:"Stability reduces crash chance"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Black Market"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Feature Enabled: ",a.featureFlags.blackMarket?"Yes":"No"]}),e.jsxs("div",{children:["Active: ",ae()?"Yes":"No"]}),ae()&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Skill Boost: +",Gt()]}),e.jsxs("div",{children:["Speed Boost: +",qt(),"x"]}),e.jsxs("div",{children:["Expires: ",Math.max(0,Math.ceil((K.expiresAt-l)/24)),"h"]})]}),e.jsxs("div",{children:["Cost: $",a.balance.blackMarket.crackedPlugins.cost]}),e.jsxs("div",{children:["Virus Risk: ",(a.balance.blackMarket.crackedPlugins.virusRisk*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Research"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Base Cost: $",a.balance.research.baseCost]}),e.jsxs("div",{children:["Cost Multiplier: ",(a.balance.research.costMultiplier-1)*100,"%"]}),e.jsxs("div",{children:["Max Level: ",a.balance.research.maxLevel]}),e.jsxs("div",{children:["Progress Boost: +",(Es()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Payout Boost: +",(Ps()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Fail Penalty: -",($s()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Energy Efficiency: -",(Ts()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Reputation Boost: +",(Rs()*100).toFixed(1),"%"]})]})]}),a.featureFlags.prestige&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Prestige"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Prestige Points: ",q]}),e.jsxs("div",{children:["Season High Rep: ",se]}),e.jsxs("div",{children:["Spawn Rate Bonus: +",(Ds()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Salary Reduction: -",(Ls()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Training Efficiency: +",(Fs()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["PC Efficiency: +",(As()*100).toFixed(1),"%"]}),e.jsxs("div",{children:["Energy Efficiency: -",(Bs()*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Achievements"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Unlocked: ",z.size,"/",Object.keys(a.achievements).length]}),e.jsxs("div",{children:["Flawless Deliveries: ",P.flawlessDeliveries]}),e.jsxs("div",{children:["Overnight Jobs: ",P.overnightJobs]}),e.jsxs("div",{children:["Speed Demon Jobs: ",P.speedDemonJobs]}),e.jsxs("div",{children:["Quality Master Jobs: ",P.qualityMasterJobs]}),e.jsxs("div",{children:["Max Work Hours: ",P.maxWorkHours]}),e.jsxs("div",{children:["Market Cycles: ",P.marketCycles]}),e.jsxs("div",{children:["Max Research Categories: ",P.maxResearchCategories]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Reputation Tiers"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Current Tier: ",Vt().name," (",k," rep)"]}),be()&&e.jsxs("div",{children:["Next Unlock: ",be().reputation," rep - ",be().description]}),e.jsx("div",{className:"text-xs opacity-70",children:"Tiers: Rookie (0-9) ‚Üí Pro (10-24) ‚Üí Legend (25-49) ‚Üí Master (50-89) ‚Üí Icon (90+)"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Marketing"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Base Cost: $",a.marketing.baseCost]}),e.jsxs("div",{children:["Cost Multiplier: ",(a.marketing.costMultiplier-1)*100,"% per use"]}),e.jsxs("div",{children:["Max Uses Per Day: ",a.marketing.maxUsesPerDay]}),e.jsxs("div",{children:["Current Cost: $",zt()]}),e.jsxs("div",{children:["Uses Today: ",Y.usesToday,"/",a.marketing.maxUsesPerDay]}),e.jsxs("div",{children:["Lead Count: ",a.marketing.leadCount.min,"-",a.marketing.leadCount.max," (30% chance for 3)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"API Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Submit Run: ","Not configured"]}),e.jsxs("div",{children:["Leaderboard: ","Not configured"]}),e.jsxs("div",{children:["Request Handle: ","Not configured"]}),e.jsxs("div",{children:["Timeout: ",a.api.timeout,"ms"]}),e.jsxs("div",{children:["Retry Delay: ",a.api.retryDelay,"ms"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Health Check"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Last Check: Day ",Je]}),e.jsxs("div",{children:["Next Check: Day ",Je+a.healthCheck.interval]}),e.jsxs("div",{children:["Current Day: ",Math.floor(l/24)]}),e.jsxs("div",{children:["Simulation Days: ",a.healthCheck.simulationDays]}),e.jsxs("div",{children:["Min Leads/Day: ",a.healthCheck.minLeadsPerDay]}),X&&e.jsx("div",{className:"text-red-400 font-semibold",children:"‚ö†Ô∏è Health check failed"}),lt.length>0&&e.jsxs("div",{className:"text-yellow-400 font-semibold",children:["‚ö†Ô∏è ",lt.length," soft clamp warnings"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Performance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["FPS: ",pe.fps]}),e.jsxs("div",{children:["Render Time: ",pe.renderTime.toFixed(1),"ms"]}),e.jsxs("div",{children:["Tick Time: ",pe.tickTime.toFixed(1),"ms"]}),e.jsxs("div",{children:["Memory: ",pe.memoryUsage.toFixed(1),"MB"]}),e.jsxs("div",{children:["Render Count: ",pe.renderCount]}),e.jsxs("div",{children:["Target FPS: ",a.dev.performance.targetFPS]}),e.jsxs("div",{children:["Max Render: ",a.dev.performance.maxRenderTime,"ms"]}),e.jsxs("div",{children:["Max Tick: ",a.dev.performance.maxTickTime,"ms"]}),Lt.length>0&&e.jsxs("div",{className:"text-yellow-400 font-semibold",children:["‚ö†Ô∏è ",Lt.length," performance warnings"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Meme Events"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Daily Chance: ",(a.balance.memeEvents.dailyChance*100).toFixed(2),"%"]}),e.jsxs("div",{children:["Max Per Day: ",a.balance.memeEvents.maxPerDay]}),e.jsxs("div",{children:["Events Today: ",te.eventsToday]}),e.jsxs("div",{children:["Current Day: ",Ss()]}),te.lastEventId&&e.jsxs("div",{className:"text-xs opacity-70",children:["Last: ",(Hs=a.balance.memeEvents.events.find(t=>t.id===te.lastEventId))==null?void 0:Hs.title]})]})]})]})]}),na==="game"?e.jsx(e.Fragment,{children:e.jsx("footer",{className:"mt-6 text-center text-xs opacity-60",children:"Have fun stacking plugins and scaling your studio üèÅ"})}):e.jsx(pn,{leaderboardData:ea,leaderboardLoading:ta,leaderboardError:sa,requestHandleForm:ra,setRequestHandleForm:ia,requestHandleStatus:aa,onFetchLeaderboard:Ua,onRequestHandle:Ia,onBackToGame:()=>ms("game"),getSampleData:Oa}),e.jsx(bn,{event:rs,onClose:()=>_e(null)}),e.jsx(vn,{countdown:is,onExport:Ba}),ca&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-2xl mx-4 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üîß Dev Command Palette"}),e.jsx("button",{onClick:()=>Ue(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Command"}),e.jsx("input",{type:"text",value:$t,onChange:t=>Ce(t.target.value),onKeyDown:t=>{if(t.key==="Enter")$t.trim()&&(de($t),Ce(""),Ue(!1));else if(t.key==="Escape")Ue(!1);else if(t.key==="ArrowUp"){if(t.preventDefault(),Oe<Ie.length-1){const s=Oe+1;He(s),Ce(Ie[s])}}else if(t.key==="ArrowDown")if(t.preventDefault(),Oe>0){const s=Oe-1;He(s),Ce(Ie[s])}else Oe===0&&(He(-1),Ce(""))},placeholder:"Type a command (e.g., 'sim 30', 'cash 100000', 'leads 10')",className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsx("button",{onClick:()=>de("sim 30"),className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-sm font-semibold",children:"üîÆ Sim 30d"}),e.jsx("button",{onClick:()=>de("cash 100000"),className:"px-3 py-2 bg-green-600 hover:bg-green-500 rounded-lg text-sm font-semibold",children:"üí∞ Fill Cash"}),e.jsx("button",{onClick:()=>de("leads 10"),className:"px-3 py-2 bg-orange-600 hover:bg-orange-500 rounded-lg text-sm font-semibold",children:"üìã Spawn Leads"}),e.jsx("button",{onClick:()=>de("flag blackMarket"),className:"px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-sm font-semibold",children:"üîß Toggle Flag"}),e.jsx("button",{onClick:()=>de("reset"),className:"px-3 py-2 bg-red-600 hover:bg-red-500 rounded-lg text-sm font-semibold",children:"üîÑ Reset"}),e.jsx("button",{onClick:()=>de("logs"),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-sm font-semibold",children:"üìã Export Logs"}),e.jsx("button",{onClick:()=>de("perf"),className:"px-3 py-2 bg-teal-600 hover:bg-teal-500 rounded-lg text-sm font-semibold",children:"üî¨ Perf Test"})]}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Available Commands:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"sim [days]"})," - Run simulation"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"cash [amount]"})," - Fill cash"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"leads [count]"})," - Spawn leads"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"flag [name]"})," - Toggle feature flag"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"reset"})," - Reset to last good save"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"logs"})," - Export logs"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"perf"})," - Run performance test"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("code",{children:"help"})," - Show help"]})]})]})]})]})}),da&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-4xl mx-4 w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üìã Changelog"}),e.jsx("button",{onClick:()=>hs(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] space-y-3",children:we.length===0?e.jsx("div",{className:"text-center py-8 text-neutral-400",children:"No changelog entries yet"}):we.map(t=>e.jsxs("div",{className:"bg-neutral-800 rounded-lg p-3 border border-neutral-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-sm px-2 py-1 rounded ${t.type==="feature"?"bg-blue-900/50 text-blue-300":t.type==="migration"?"bg-yellow-900/50 text-yellow-300":t.type==="dev"?"bg-purple-900/50 text-purple-300":"bg-neutral-700 text-neutral-300"}`,children:t.type}),e.jsxs("div",{className:"text-sm text-neutral-400",children:["Day ",t.day," (Tick ",t.tick,")"]})]}),e.jsx("div",{className:"text-xs text-neutral-500",children:new Date(t.timestamp).toLocaleString()})]}),e.jsx("div",{className:"font-medium mb-1",children:t.message}),t.details&&e.jsx("div",{className:"text-sm text-neutral-400",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs bg-neutral-900 p-2 rounded",children:JSON.stringify(t.details,null,2)})})]},t.id))})]})})]})}function pn({leaderboardData:l,leaderboardLoading:m,leaderboardError:C,requestHandleForm:N,setRequestHandleForm:j,requestHandleStatus:y,onFetchLeaderboard:f,onRequestHandle:T,onBackToGame:k,getSampleData:oe}){const[Re,ue]=c.useState(!1);c.useEffect(()=>{},[f]);const g=async b=>{if(b.preventDefault(),!N.email||!N.preferredHandle){alert("Please fill in both email and preferred handle");return}try{await T(N.email,N.preferredHandle),j({email:"",preferredHandle:""}),ue(!1)}catch{}},G=oe();return e.jsxs("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-black tracking-tight",children:"üìä Leaderboard"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:k,className:"px-3 py-2 rounded-xl text-sm font-semibold shadow bg-neutral-800 hover:bg-neutral-700",children:"‚Üê Back to Game"}),a.api.submitRunUrl,a.api.requestHandleUrl,a.api.leaderboardUrl]})]}),e.jsx("div",{className:"mt-4 bg-blue-900/20 border border-blue-500/30 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"‚ÑπÔ∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-300",children:"API Not Configured"}),e.jsx("p",{className:"text-sm text-blue-200",children:"Showing sample data. Configure CONFIG.api.leaderboardUrl to connect to a real leaderboard."})]})]})}),C&&e.jsx("div",{className:"mt-4 bg-red-900/20 border border-red-500/30 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-300",children:"Error Loading Leaderboard"}),e.jsx("p",{className:"text-sm text-red-200",children:C})]})]})}),e.jsxs("div",{className:"mt-6 bg-neutral-900/60 rounded-2xl p-6 border border-neutral-800/60",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Top Studios"}),m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-2xl mb-2",children:"‚è≥"}),e.jsx("div",{children:"Loading leaderboard..."})]}):G.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-2xl mb-2",children:"üìä"}),e.jsx("div",{children:"No leaderboard data available"})]}):e.jsx("div",{className:"space-y-3",children:G.map((b,I)=>e.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`text-lg font-bold ${b.rank===1?"text-yellow-400":b.rank===2?"text-gray-400":b.rank===3?"text-orange-600":"text-neutral-400"}`,children:["#",b.rank]}),e.jsx("div",{className:"font-semibold text-lg",children:b.handle})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-400",children:["$",b.cash.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-neutral-400",children:[b.reputation," reputation"]})]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-neutral-300",children:[e.jsxs("div",{children:["Jobs completed: ",b.jobsCompleted]}),e.jsxs("div",{className:"text-xs opacity-70",children:['Funniest: "',b.funniestEvent,'"']})]})]},I))})]}),Re&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üìß Request Handle"}),e.jsx("button",{onClick:()=>ue(!1),className:"text-neutral-400 hover:text-white",children:"‚úï"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:N.email,onChange:b=>j(I=>({...I,email:b.target.value})),className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preferred Handle"}),e.jsx("input",{type:"text",value:N.preferredHandle,onChange:b=>j(I=>({...I,preferredHandle:b.target.value})),className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",placeholder:"e.g., speed_demon",required:!0})]}),y&&e.jsx("div",{className:`p-3 rounded-lg ${y.type==="loading"?"bg-blue-900/20 border border-blue-500/30":y.type==="success"?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:e.jsx("div",{className:`text-sm ${y.type==="loading"?"text-blue-300":y.type==="success"?"text-green-300":"text-red-300"}`,children:y.message})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:(y==null?void 0:y.type)==="loading",className:`flex-1 px-4 py-2 rounded-lg font-semibold ${(y==null?void 0:y.type)==="loading"?"bg-neutral-700 opacity-60":"bg-blue-600 hover:bg-blue-500"}`,children:(y==null?void 0:y.type)==="loading"?"Submitting...":"Submit Request"}),e.jsx("button",{type:"button",onClick:()=>ue(!1),className:"px-4 py-2 bg-neutral-700 hover:bg-neutral-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})})]})}function ie({label:l,value:m,sub:C}){return e.jsxs("div",{className:"bg-neutral-900/60 border border-neutral-800/60 rounded-2xl p-3",children:[e.jsx("div",{className:"text-xs opacity-70",children:l}),e.jsx("div",{className:"text-xl font-bold",children:m}),C&&e.jsx("div",{className:"text-xs opacity-60",children:C})]})}function yt({children:l,className:m=""}){return e.jsx("span",{className:`inline-block bg-neutral-900 border border-neutral-700/60 px-2 py-0.5 rounded-md text-[11px] ${m}`,children:l})}function fn({value:l}){return e.jsx("div",{className:"w-full h-3 rounded-lg bg-neutral-900 border border-neutral-800/60 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-600",style:{width:`${H(l,0,100)}%`}})})}function bn({event:l,onClose:m}){const[C,N]=c.useState(2);if(c.useEffect(()=>{if(!l)return;const f=setInterval(()=>{N(T=>T<=1?(m(),0):T-1)},1e3);return()=>clearInterval(f)},[l,m]),!l)return null;const j=l.cashDelta>0,y=j?"+":"";return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 animate-flash",children:e.jsxs("div",{className:`relative bg-neutral-900 border-4 rounded-2xl p-8 max-w-md mx-4 text-center animate-shake shadow-2xl ${j?"border-green-500 shadow-green-500/50":"border-red-500 shadow-red-500/50"}`,style:{animation:"shake 0.5s ease-in-out",boxShadow:`0 0 40px ${j?"rgba(34, 197, 94, 0.6)":"rgba(239, 68, 68, 0.6)"}`},children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l.icon}),e.jsx("h2",{className:`text-2xl font-bold mb-3 ${l.color}`,children:l.title}),e.jsx("p",{className:"text-neutral-300 mb-4 text-sm leading-relaxed",children:l.description}),e.jsxs("div",{className:`text-4xl font-bold ${l.color} animate-pulse mb-2`,children:[y,"$",Math.abs(l.cashDelta).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-neutral-400 mb-4",children:[j?"üí∞ Cha-ching!":"üí∏ Ouch!"," ‚Ä¢ Auto-dismissing in ",C,"s"]}),e.jsx("button",{onClick:m,className:"px-6 py-3 bg-neutral-800 hover:bg-neutral-700 rounded-xl font-semibold transition-all hover:scale-105",children:"Close Now"})]})})}function vn({countdown:l,onExport:m}){return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-red-900/90 animate-pulse",children:[e.jsxs("div",{className:"relative bg-black border-4 border-red-500 rounded-2xl p-8 max-w-lg mx-4 text-center animate-bounce",children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"ü¶†"}),e.jsx("h2",{className:"text-3xl font-bold mb-4 text-red-400",children:"SYSTEM COMPROMISED!"}),e.jsxs("p",{className:"text-red-300 mb-6 text-lg",children:["MALICIOUS CODE DETECTED!",e.jsx("br",{}),"Your system has been infected with a catastrophic virus."]}),e.jsx("div",{className:"text-5xl font-bold text-red-500 mb-6 animate-pulse",children:l}),e.jsxs("p",{className:"text-red-200 mb-6",children:["System will be reset in ",l," seconds to prevent further corruption."]}),e.jsx("div",{className:"flex gap-4 justify-center",children:e.jsx("button",{onClick:m,className:"px-6 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg font-bold transition-colors",children:"üíæ Export Save"})}),e.jsx("div",{className:"text-xs text-red-400 mt-4",children:"‚ö†Ô∏è This is your last chance to save your progress!"})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
      `})]})}function yn({value:l,label:m}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs opacity-70",children:[e.jsx("span",{children:m}),e.jsxs("span",{children:[l,"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-md bg-neutral-900 overflow-hidden border border-neutral-800/60",children:e.jsx("div",{className:"h-full bg-sky-600",style:{width:`${H(l,0,100)}%`}})})]})}const ts="car-editor-tycoon:";function jn(l){const m=JSON.stringify(l);try{const C=new TextEncoder().encode(m);return"b64:"+btoa(String.fromCharCode(...C))}catch{return m}}function kn(l){try{if(l.startsWith("b64:")){const m=l.slice(4),C=Uint8Array.from(atob(m),j=>j.charCodeAt(0)),N=new TextDecoder().decode(C);return JSON.parse(N)}}catch{}try{return JSON.parse(l)}catch{return null}}function F(l,m){try{const C=localStorage.getItem(ts+l);return C?kn(C)??m:m}catch{return m}}function A(l,m){try{const C=jn(m);localStorage.setItem(ts+l,C)}catch{}}es.createRoot(document.getElementById("root")).render(e.jsx(Vs.StrictMode,{children:e.jsx(gn,{})}));
//# sourceMappingURL=index-BFCWEmXf.js.map
